{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-av","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":32,"index":90}}],"key":"VxVG0TWBdB+Oc1qOQ32HKtN+H5M=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":91},"end":{"line":3,"column":47,"index":138}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useAudioRecording = useAudioRecording;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoAv = require(_dependencyMap[1], \"expo-av\");\n  var _expoFileSystem = require(_dependencyMap[2], \"expo-file-system\");\n  var FileSystem = _interopNamespace(_expoFileSystem);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  function useAudioRecording() {\n    _s();\n    const [recording, setRecording] = (0, _react.useState)(null);\n    const [isRecording, setIsRecording] = (0, _react.useState)(false);\n    const [permissionResponse, requestPermission] = _expoAv.Audio.usePermissions();\n    (0, _react.useEffect)(() => {\n      return () => {\n        if (recording) {\n          recording.stopAndUnloadAsync().catch(console.error);\n        }\n      };\n    }, [recording]);\n    const startRecording = (0, _react.useCallback)(async () => {\n      try {\n        // Check permissions\n        if (permissionResponse?.status !== 'granted') {\n          console.log('Requesting microphone permission...');\n          const response = await requestPermission();\n          if (response.status !== 'granted') {\n            throw new Error('Microphone permission was denied');\n          }\n        }\n\n        // Set audio mode\n        const audioMode = {\n          allowsRecordingIOS: true,\n          playsInSilentModeIOS: true,\n          staysActiveInBackground: false\n        };\n\n        // Only add Android-specific settings on Android platform\n        if (Platform.default.OS === 'android' && _expoAv.Audio.AndroidAudioUsage) {\n          audioMode.interruptionModeAndroid = _expoAv.Audio.AndroidAudioUsage.VOICE_COMMUNICATION;\n        }\n        await _expoAv.Audio.setAudioModeAsync(audioMode);\n\n        // Start recording\n        const {\n          recording: newRecording\n        } = await _expoAv.Audio.Recording.createAsync(_expoAv.Audio.RecordingOptionsPresets.HIGH_QUALITY);\n        setRecording(newRecording);\n        setIsRecording(true);\n      } catch (error) {\n        console.error('Failed to start recording:', error);\n        throw error;\n      }\n    }, [permissionResponse, requestPermission]);\n    const stopRecording = (0, _react.useCallback)(async () => {\n      if (!recording) {\n        throw new Error('No active recording');\n      }\n      try {\n        await recording.stopAndUnloadAsync();\n        const uri = recording.getURI();\n        setRecording(null);\n        setIsRecording(false);\n        return uri;\n      } catch (error) {\n        console.error('Failed to stop recording:', error);\n        throw error;\n      }\n    }, [recording]);\n    const getAudioBlob = (0, _react.useCallback)(async uri => {\n      try {\n        if (Platform.default.OS === 'web') {\n          const response = await fetch(uri);\n          const blob = await response.blob();\n          return {\n            blob,\n            filename: 'audio.webm'\n          };\n        } else {\n          // For native platforms, read as base64 and convert to blob\n          const base64 = await FileSystem.readAsStringAsync(uri, {\n            encoding: FileSystem.EncodingType.Base64\n          });\n\n          // Convert base64 to blob\n          const response = await fetch(`data:audio/mp3;base64,${base64}`);\n          const blob = await response.blob();\n          return {\n            blob,\n            filename: 'audio.mp3'\n          };\n        }\n      } catch (error) {\n        console.error('Failed to get audio blob:', error);\n        throw error;\n      }\n    }, []);\n    return {\n      isRecording,\n      startRecording,\n      stopRecording,\n      getAudioBlob,\n      permissionStatus: permissionResponse?.status\n    };\n  }\n  _s(useAudioRecording, \"851t8NlxT567QcRIBQpL2O86daA=\", false, function () {\n    return [_expoAv.Audio.usePermissions];\n  });\n});","lineCount":136,"map":[[28,2,6,0,"exports"],[28,9,6,0],[28,10,6,0,"useAudioRecording"],[28,27,6,0],[28,30,6,0,"useAudioRecording"],[28,47,6,0],[29,2,1,0],[29,6,1,0,"_react"],[29,12,1,0],[29,15,1,0,"require"],[29,22,1,0],[29,23,1,0,"_dependencyMap"],[29,37,1,0],[30,2,2,0],[30,6,2,0,"_expoAv"],[30,13,2,0],[30,16,2,0,"require"],[30,23,2,0],[30,24,2,0,"_dependencyMap"],[30,38,2,0],[31,2,3,0],[31,6,3,0,"_expoFileSystem"],[31,21,3,0],[31,24,3,0,"require"],[31,31,3,0],[31,32,3,0,"_dependencyMap"],[31,46,3,0],[32,2,3,0],[32,6,3,0,"FileSystem"],[32,16,3,0],[32,19,3,0,"_interopNamespace"],[32,36,3,0],[32,37,3,0,"_expoFileSystem"],[32,52,3,0],[33,2,3,47],[33,6,3,47,"_reactNativeWebDistExportsPlatform"],[33,40,3,47],[33,43,3,47,"require"],[33,50,3,47],[33,51,3,47,"_dependencyMap"],[33,65,3,47],[34,2,3,47],[34,6,3,47,"Platform"],[34,14,3,47],[34,17,3,47,"_interopDefault"],[34,32,3,47],[34,33,3,47,"_reactNativeWebDistExportsPlatform"],[34,67,3,47],[35,2,6,7],[35,11,6,16,"useAudioRecording"],[35,28,6,33,"useAudioRecording"],[35,29,6,33],[35,31,6,36],[36,4,6,36,"_s"],[36,6,6,36],[37,4,7,2],[37,10,7,8],[37,11,7,9,"recording"],[37,20,7,18],[37,22,7,20,"setRecording"],[37,34,7,32],[37,35,7,33],[37,38,7,36],[37,42,7,36,"useState"],[37,48,7,44],[37,49,7,44,"useState"],[37,57,7,44],[37,59,7,69],[37,63,7,73],[37,64,7,74],[38,4,8,2],[38,10,8,8],[38,11,8,9,"isRecording"],[38,22,8,20],[38,24,8,22,"setIsRecording"],[38,38,8,36],[38,39,8,37],[38,42,8,40],[38,46,8,40,"useState"],[38,52,8,48],[38,53,8,48,"useState"],[38,61,8,48],[38,63,8,49],[38,68,8,54],[38,69,8,55],[39,4,9,2],[39,10,9,8],[39,11,9,9,"permissionResponse"],[39,29,9,27],[39,31,9,29,"requestPermission"],[39,48,9,46],[39,49,9,47],[39,52,9,50,"Audio"],[39,59,9,55],[39,60,9,55,"Audio"],[39,65,9,55],[39,66,9,56,"usePermissions"],[39,80,9,70],[39,81,9,71],[39,82,9,72],[40,4,11,2],[40,8,11,2,"useEffect"],[40,14,11,11],[40,15,11,11,"useEffect"],[40,24,11,11],[40,26,11,12],[40,32,11,18],[41,6,12,4],[41,13,12,11],[41,19,12,17],[42,8,13,6],[42,12,13,10,"recording"],[42,21,13,19],[42,23,13,21],[43,10,14,8,"recording"],[43,19,14,17],[43,20,14,18,"stopAndUnloadAsync"],[43,38,14,36],[43,39,14,37],[43,40,14,38],[43,41,14,39,"catch"],[43,46,14,44],[43,47,14,45,"console"],[43,54,14,52],[43,55,14,53,"error"],[43,60,14,58],[43,61,14,59],[44,8,15,6],[45,6,16,4],[45,7,16,5],[46,4,17,2],[46,5,17,3],[46,7,17,5],[46,8,17,6,"recording"],[46,17,17,15],[46,18,17,16],[46,19,17,17],[47,4,19,2],[47,10,19,8,"startRecording"],[47,24,19,22],[47,27,19,25],[47,31,19,25,"useCallback"],[47,37,19,36],[47,38,19,36,"useCallback"],[47,49,19,36],[47,51,19,37],[47,63,19,49],[48,6,20,4],[48,10,20,8],[49,8,21,6],[50,8,22,6],[50,12,22,10,"permissionResponse"],[50,30,22,28],[50,32,22,30,"status"],[50,38,22,36],[50,43,22,41],[50,52,22,50],[50,54,22,52],[51,10,23,8,"console"],[51,17,23,15],[51,18,23,16,"log"],[51,21,23,19],[51,22,23,20],[51,59,23,57],[51,60,23,58],[52,10,24,8],[52,16,24,14,"response"],[52,24,24,22],[52,27,24,25],[52,33,24,31,"requestPermission"],[52,50,24,48],[52,51,24,49],[52,52,24,50],[53,10,25,8],[53,14,25,12,"response"],[53,22,25,20],[53,23,25,21,"status"],[53,29,25,27],[53,34,25,32],[53,43,25,41],[53,45,25,43],[54,12,26,10],[54,18,26,16],[54,22,26,20,"Error"],[54,27,26,25],[54,28,26,26],[54,62,26,60],[54,63,26,61],[55,10,27,8],[56,8,28,6],[58,8,30,6],[59,8,31,6],[59,14,31,12,"audioMode"],[59,23,31,26],[59,26,31,29],[60,10,32,8,"allowsRecordingIOS"],[60,28,32,26],[60,30,32,28],[60,34,32,32],[61,10,33,8,"playsInSilentModeIOS"],[61,30,33,28],[61,32,33,30],[61,36,33,34],[62,10,34,8,"staysActiveInBackground"],[62,33,34,31],[62,35,34,33],[63,8,35,6],[63,9,35,7],[65,8,37,6],[66,8,38,6],[66,12,38,10,"Platform"],[66,20,38,18],[66,21,38,18,"default"],[66,28,38,18],[66,29,38,19,"OS"],[66,31,38,21],[66,36,38,26],[66,45,38,35],[66,49,38,39,"Audio"],[66,56,38,44],[66,57,38,44,"Audio"],[66,62,38,44],[66,63,38,45,"AndroidAudioUsage"],[66,80,38,62],[66,82,38,64],[67,10,39,8,"audioMode"],[67,19,39,17],[67,20,39,18,"interruptionModeAndroid"],[67,43,39,41],[67,46,39,44,"Audio"],[67,53,39,49],[67,54,39,49,"Audio"],[67,59,39,49],[67,60,39,50,"AndroidAudioUsage"],[67,77,39,67],[67,78,39,68,"VOICE_COMMUNICATION"],[67,97,39,87],[68,8,40,6],[69,8,42,6],[69,14,42,12,"Audio"],[69,21,42,17],[69,22,42,17,"Audio"],[69,27,42,17],[69,28,42,18,"setAudioModeAsync"],[69,45,42,35],[69,46,42,36,"audioMode"],[69,55,42,45],[69,56,42,46],[71,8,44,6],[72,8,45,6],[72,14,45,12],[73,10,45,14,"recording"],[73,19,45,23],[73,21,45,25,"newRecording"],[74,8,45,38],[74,9,45,39],[74,12,45,42],[74,18,45,48,"Audio"],[74,25,45,53],[74,26,45,53,"Audio"],[74,31,45,53],[74,32,45,54,"Recording"],[74,41,45,63],[74,42,45,64,"createAsync"],[74,53,45,75],[74,54,46,8,"Audio"],[74,61,46,13],[74,62,46,13,"Audio"],[74,67,46,13],[74,68,46,14,"RecordingOptionsPresets"],[74,91,46,37],[74,92,46,38,"HIGH_QUALITY"],[74,104,47,6],[74,105,47,7],[75,8,49,6,"setRecording"],[75,20,49,18],[75,21,49,19,"newRecording"],[75,33,49,31],[75,34,49,32],[76,8,50,6,"setIsRecording"],[76,22,50,20],[76,23,50,21],[76,27,50,25],[76,28,50,26],[77,6,51,4],[77,7,51,5],[77,8,51,6],[77,15,51,13,"error"],[77,20,51,18],[77,22,51,20],[78,8,52,6,"console"],[78,15,52,13],[78,16,52,14,"error"],[78,21,52,19],[78,22,52,20],[78,50,52,48],[78,52,52,50,"error"],[78,57,52,55],[78,58,52,56],[79,8,53,6],[79,14,53,12,"error"],[79,19,53,17],[80,6,54,4],[81,4,55,2],[81,5,55,3],[81,7,55,5],[81,8,55,6,"permissionResponse"],[81,26,55,24],[81,28,55,26,"requestPermission"],[81,45,55,43],[81,46,55,44],[81,47,55,45],[82,4,57,2],[82,10,57,8,"stopRecording"],[82,23,57,21],[82,26,57,24],[82,30,57,24,"useCallback"],[82,36,57,35],[82,37,57,35,"useCallback"],[82,48,57,35],[82,50,57,36],[82,62,57,48],[83,6,58,4],[83,10,58,8],[83,11,58,9,"recording"],[83,20,58,18],[83,22,58,20],[84,8,59,6],[84,14,59,12],[84,18,59,16,"Error"],[84,23,59,21],[84,24,59,22],[84,45,59,43],[84,46,59,44],[85,6,60,4],[86,6,62,4],[86,10,62,8],[87,8,63,6],[87,14,63,12,"recording"],[87,23,63,21],[87,24,63,22,"stopAndUnloadAsync"],[87,42,63,40],[87,43,63,41],[87,44,63,42],[88,8,64,6],[88,14,64,12,"uri"],[88,17,64,15],[88,20,64,18,"recording"],[88,29,64,27],[88,30,64,28,"getURI"],[88,36,64,34],[88,37,64,35],[88,38,64,36],[89,8,66,6,"setRecording"],[89,20,66,18],[89,21,66,19],[89,25,66,23],[89,26,66,24],[90,8,67,6,"setIsRecording"],[90,22,67,20],[90,23,67,21],[90,28,67,26],[90,29,67,27],[91,8,69,6],[91,15,69,13,"uri"],[91,18,69,16],[92,6,70,4],[92,7,70,5],[92,8,70,6],[92,15,70,13,"error"],[92,20,70,18],[92,22,70,20],[93,8,71,6,"console"],[93,15,71,13],[93,16,71,14,"error"],[93,21,71,19],[93,22,71,20],[93,49,71,47],[93,51,71,49,"error"],[93,56,71,54],[93,57,71,55],[94,8,72,6],[94,14,72,12,"error"],[94,19,72,17],[95,6,73,4],[96,4,74,2],[96,5,74,3],[96,7,74,5],[96,8,74,6,"recording"],[96,17,74,15],[96,18,74,16],[96,19,74,17],[97,4,76,2],[97,10,76,8,"getAudioBlob"],[97,22,76,20],[97,25,76,23],[97,29,76,23,"useCallback"],[97,35,76,34],[97,36,76,34,"useCallback"],[97,47,76,34],[97,49,76,35],[97,55,76,42,"uri"],[97,58,76,53],[97,62,76,101],[98,6,77,4],[98,10,77,8],[99,8,78,6],[99,12,78,10,"Platform"],[99,20,78,18],[99,21,78,18,"default"],[99,28,78,18],[99,29,78,19,"OS"],[99,31,78,21],[99,36,78,26],[99,41,78,31],[99,43,78,33],[100,10,79,8],[100,16,79,14,"response"],[100,24,79,22],[100,27,79,25],[100,33,79,31,"fetch"],[100,38,79,36],[100,39,79,37,"uri"],[100,42,79,40],[100,43,79,41],[101,10,80,8],[101,16,80,14,"blob"],[101,20,80,18],[101,23,80,21],[101,29,80,27,"response"],[101,37,80,35],[101,38,80,36,"blob"],[101,42,80,40],[101,43,80,41],[101,44,80,42],[102,10,81,8],[102,17,81,15],[103,12,81,17,"blob"],[103,16,81,21],[104,12,81,23,"filename"],[104,20,81,31],[104,22,81,33],[105,10,81,46],[105,11,81,47],[106,8,82,6],[106,9,82,7],[106,15,82,13],[107,10,83,8],[108,10,84,8],[108,16,84,14,"base64"],[108,22,84,20],[108,25,84,23],[108,31,84,29,"FileSystem"],[108,41,84,39],[108,42,84,40,"readAsStringAsync"],[108,59,84,57],[108,60,84,58,"uri"],[108,63,84,61],[108,65,84,63],[109,12,85,10,"encoding"],[109,20,85,18],[109,22,85,20,"FileSystem"],[109,32,85,30],[109,33,85,31,"EncodingType"],[109,45,85,43],[109,46,85,44,"Base64"],[110,10,86,8],[110,11,86,9],[110,12,86,10],[112,10,88,8],[113,10,89,8],[113,16,89,14,"response"],[113,24,89,22],[113,27,89,25],[113,33,89,31,"fetch"],[113,38,89,36],[113,39,89,37],[113,64,89,62,"base64"],[113,70,89,68],[113,72,89,70],[113,73,89,71],[114,10,90,8],[114,16,90,14,"blob"],[114,20,90,18],[114,23,90,21],[114,29,90,27,"response"],[114,37,90,35],[114,38,90,36,"blob"],[114,42,90,40],[114,43,90,41],[114,44,90,42],[115,10,92,8],[115,17,92,15],[116,12,92,17,"blob"],[116,16,92,21],[117,12,92,23,"filename"],[117,20,92,31],[117,22,92,33],[118,10,92,45],[118,11,92,46],[119,8,93,6],[120,6,94,4],[120,7,94,5],[120,8,94,6],[120,15,94,13,"error"],[120,20,94,18],[120,22,94,20],[121,8,95,6,"console"],[121,15,95,13],[121,16,95,14,"error"],[121,21,95,19],[121,22,95,20],[121,49,95,47],[121,51,95,49,"error"],[121,56,95,54],[121,57,95,55],[122,8,96,6],[122,14,96,12,"error"],[122,19,96,17],[123,6,97,4],[124,4,98,2],[124,5,98,3],[124,7,98,5],[124,9,98,7],[124,10,98,8],[125,4,100,2],[125,11,100,9],[126,6,101,4,"isRecording"],[126,17,101,15],[127,6,102,4,"startRecording"],[127,20,102,18],[128,6,103,4,"stopRecording"],[128,19,103,17],[129,6,104,4,"getAudioBlob"],[129,18,104,16],[130,6,105,4,"permissionStatus"],[130,22,105,20],[130,24,105,22,"permissionResponse"],[130,42,105,40],[130,44,105,42,"status"],[131,4,106,2],[131,5,106,3],[132,2,107,0],[133,2,107,1,"_s"],[133,4,107,1],[133,5,6,16,"useAudioRecording"],[133,22,6,33],[134,4,6,33],[134,12,9,50,"Audio"],[134,19,9,55],[134,20,9,55,"Audio"],[134,25,9,55],[134,26,9,56,"usePermissions"],[134,40,9,70],[135,2,9,70],[136,0,9,70],[136,3]],"functionMap":{"names":["<global>","useAudioRecording","useEffect$argument_0","<anonymous>","startRecording","stopRecording","getAudioBlob"],"mappings":"AAA;OCK;YCK;WCC;KDI;GDC;qCGE;GHoC;oCIE;GJiB;mCKE;GLsB;CDS"},"hasCjsExports":false},"type":"js/module"}]}