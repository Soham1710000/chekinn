{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-av","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":32,"index":90}}],"key":"VxVG0TWBdB+Oc1qOQ32HKtN+H5M=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":91},"end":{"line":3,"column":47,"index":138}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useAudioRecording = useAudioRecording;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoAv = require(_dependencyMap[1], \"expo-av\");\n  var _expoFileSystem = require(_dependencyMap[2], \"expo-file-system\");\n  var FileSystem = _interopNamespace(_expoFileSystem);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  function useAudioRecording() {\n    _s();\n    const [recording, setRecording] = (0, _react.useState)(null);\n    const [isRecording, setIsRecording] = (0, _react.useState)(false);\n    const [permissionResponse, requestPermission] = _expoAv.Audio.usePermissions();\n    (0, _react.useEffect)(() => {\n      return () => {\n        if (recording) {\n          recording.stopAndUnloadAsync().catch(console.error);\n        }\n      };\n    }, [recording]);\n    const startRecording = (0, _react.useCallback)(async () => {\n      try {\n        // Check permissions\n        if (permissionResponse?.status !== 'granted') {\n          console.log('Requesting microphone permission...');\n          const response = await requestPermission();\n          if (response.status !== 'granted') {\n            throw new Error('Microphone permission was denied');\n          }\n        }\n\n        // Set audio mode\n        await _expoAv.Audio.setAudioModeAsync({\n          allowsRecordingIOS: true,\n          playsInSilentModeIOS: true,\n          staysActiveInBackground: false,\n          interruptionModeAndroid: _expoAv.Audio.AndroidAudioUsage.VOICE_COMMUNICATION\n        });\n\n        // Start recording\n        const {\n          recording: newRecording\n        } = await _expoAv.Audio.Recording.createAsync(_expoAv.Audio.RecordingOptionsPresets.HIGH_QUALITY);\n        setRecording(newRecording);\n        setIsRecording(true);\n      } catch (error) {\n        console.error('Failed to start recording:', error);\n        throw error;\n      }\n    }, [permissionResponse, requestPermission]);\n    const stopRecording = (0, _react.useCallback)(async () => {\n      if (!recording) {\n        throw new Error('No active recording');\n      }\n      try {\n        await recording.stopAndUnloadAsync();\n        const uri = recording.getURI();\n        setRecording(null);\n        setIsRecording(false);\n        return uri;\n      } catch (error) {\n        console.error('Failed to stop recording:', error);\n        throw error;\n      }\n    }, [recording]);\n    const getAudioBlob = (0, _react.useCallback)(async uri => {\n      try {\n        if (Platform.default.OS === 'web') {\n          const response = await fetch(uri);\n          const blob = await response.blob();\n          return {\n            blob,\n            filename: 'audio.webm'\n          };\n        } else {\n          // For native platforms, read as base64 and convert to blob\n          const base64 = await FileSystem.readAsStringAsync(uri, {\n            encoding: FileSystem.EncodingType.Base64\n          });\n\n          // Convert base64 to blob\n          const response = await fetch(`data:audio/mp3;base64,${base64}`);\n          const blob = await response.blob();\n          return {\n            blob,\n            filename: 'audio.mp3'\n          };\n        }\n      } catch (error) {\n        console.error('Failed to get audio blob:', error);\n        throw error;\n      }\n    }, []);\n    return {\n      isRecording,\n      startRecording,\n      stopRecording,\n      getAudioBlob,\n      permissionStatus: permissionResponse?.status\n    };\n  }\n  _s(useAudioRecording, \"851t8NlxT567QcRIBQpL2O86daA=\", false, function () {\n    return [_expoAv.Audio.usePermissions];\n  });\n});","lineCount":131,"map":[[28,2,6,0,"exports"],[28,9,6,0],[28,10,6,0,"useAudioRecording"],[28,27,6,0],[28,30,6,0,"useAudioRecording"],[28,47,6,0],[29,2,1,0],[29,6,1,0,"_react"],[29,12,1,0],[29,15,1,0,"require"],[29,22,1,0],[29,23,1,0,"_dependencyMap"],[29,37,1,0],[30,2,2,0],[30,6,2,0,"_expoAv"],[30,13,2,0],[30,16,2,0,"require"],[30,23,2,0],[30,24,2,0,"_dependencyMap"],[30,38,2,0],[31,2,3,0],[31,6,3,0,"_expoFileSystem"],[31,21,3,0],[31,24,3,0,"require"],[31,31,3,0],[31,32,3,0,"_dependencyMap"],[31,46,3,0],[32,2,3,0],[32,6,3,0,"FileSystem"],[32,16,3,0],[32,19,3,0,"_interopNamespace"],[32,36,3,0],[32,37,3,0,"_expoFileSystem"],[32,52,3,0],[33,2,3,47],[33,6,3,47,"_reactNativeWebDistExportsPlatform"],[33,40,3,47],[33,43,3,47,"require"],[33,50,3,47],[33,51,3,47,"_dependencyMap"],[33,65,3,47],[34,2,3,47],[34,6,3,47,"Platform"],[34,14,3,47],[34,17,3,47,"_interopDefault"],[34,32,3,47],[34,33,3,47,"_reactNativeWebDistExportsPlatform"],[34,67,3,47],[35,2,6,7],[35,11,6,16,"useAudioRecording"],[35,28,6,33,"useAudioRecording"],[35,29,6,33],[35,31,6,36],[36,4,6,36,"_s"],[36,6,6,36],[37,4,7,2],[37,10,7,8],[37,11,7,9,"recording"],[37,20,7,18],[37,22,7,20,"setRecording"],[37,34,7,32],[37,35,7,33],[37,38,7,36],[37,42,7,36,"useState"],[37,48,7,44],[37,49,7,44,"useState"],[37,57,7,44],[37,59,7,69],[37,63,7,73],[37,64,7,74],[38,4,8,2],[38,10,8,8],[38,11,8,9,"isRecording"],[38,22,8,20],[38,24,8,22,"setIsRecording"],[38,38,8,36],[38,39,8,37],[38,42,8,40],[38,46,8,40,"useState"],[38,52,8,48],[38,53,8,48,"useState"],[38,61,8,48],[38,63,8,49],[38,68,8,54],[38,69,8,55],[39,4,9,2],[39,10,9,8],[39,11,9,9,"permissionResponse"],[39,29,9,27],[39,31,9,29,"requestPermission"],[39,48,9,46],[39,49,9,47],[39,52,9,50,"Audio"],[39,59,9,55],[39,60,9,55,"Audio"],[39,65,9,55],[39,66,9,56,"usePermissions"],[39,80,9,70],[39,81,9,71],[39,82,9,72],[40,4,11,2],[40,8,11,2,"useEffect"],[40,14,11,11],[40,15,11,11,"useEffect"],[40,24,11,11],[40,26,11,12],[40,32,11,18],[41,6,12,4],[41,13,12,11],[41,19,12,17],[42,8,13,6],[42,12,13,10,"recording"],[42,21,13,19],[42,23,13,21],[43,10,14,8,"recording"],[43,19,14,17],[43,20,14,18,"stopAndUnloadAsync"],[43,38,14,36],[43,39,14,37],[43,40,14,38],[43,41,14,39,"catch"],[43,46,14,44],[43,47,14,45,"console"],[43,54,14,52],[43,55,14,53,"error"],[43,60,14,58],[43,61,14,59],[44,8,15,6],[45,6,16,4],[45,7,16,5],[46,4,17,2],[46,5,17,3],[46,7,17,5],[46,8,17,6,"recording"],[46,17,17,15],[46,18,17,16],[46,19,17,17],[47,4,19,2],[47,10,19,8,"startRecording"],[47,24,19,22],[47,27,19,25],[47,31,19,25,"useCallback"],[47,37,19,36],[47,38,19,36,"useCallback"],[47,49,19,36],[47,51,19,37],[47,63,19,49],[48,6,20,4],[48,10,20,8],[49,8,21,6],[50,8,22,6],[50,12,22,10,"permissionResponse"],[50,30,22,28],[50,32,22,30,"status"],[50,38,22,36],[50,43,22,41],[50,52,22,50],[50,54,22,52],[51,10,23,8,"console"],[51,17,23,15],[51,18,23,16,"log"],[51,21,23,19],[51,22,23,20],[51,59,23,57],[51,60,23,58],[52,10,24,8],[52,16,24,14,"response"],[52,24,24,22],[52,27,24,25],[52,33,24,31,"requestPermission"],[52,50,24,48],[52,51,24,49],[52,52,24,50],[53,10,25,8],[53,14,25,12,"response"],[53,22,25,20],[53,23,25,21,"status"],[53,29,25,27],[53,34,25,32],[53,43,25,41],[53,45,25,43],[54,12,26,10],[54,18,26,16],[54,22,26,20,"Error"],[54,27,26,25],[54,28,26,26],[54,62,26,60],[54,63,26,61],[55,10,27,8],[56,8,28,6],[58,8,30,6],[59,8,31,6],[59,14,31,12,"Audio"],[59,21,31,17],[59,22,31,17,"Audio"],[59,27,31,17],[59,28,31,18,"setAudioModeAsync"],[59,45,31,35],[59,46,31,36],[60,10,32,8,"allowsRecordingIOS"],[60,28,32,26],[60,30,32,28],[60,34,32,32],[61,10,33,8,"playsInSilentModeIOS"],[61,30,33,28],[61,32,33,30],[61,36,33,34],[62,10,34,8,"staysActiveInBackground"],[62,33,34,31],[62,35,34,33],[62,40,34,38],[63,10,35,8,"interruptionModeAndroid"],[63,33,35,31],[63,35,35,33,"Audio"],[63,42,35,38],[63,43,35,38,"Audio"],[63,48,35,38],[63,49,35,39,"AndroidAudioUsage"],[63,66,35,56],[63,67,35,57,"VOICE_COMMUNICATION"],[64,8,36,6],[64,9,36,7],[64,10,36,8],[66,8,38,6],[67,8,39,6],[67,14,39,12],[68,10,39,14,"recording"],[68,19,39,23],[68,21,39,25,"newRecording"],[69,8,39,38],[69,9,39,39],[69,12,39,42],[69,18,39,48,"Audio"],[69,25,39,53],[69,26,39,53,"Audio"],[69,31,39,53],[69,32,39,54,"Recording"],[69,41,39,63],[69,42,39,64,"createAsync"],[69,53,39,75],[69,54,40,8,"Audio"],[69,61,40,13],[69,62,40,13,"Audio"],[69,67,40,13],[69,68,40,14,"RecordingOptionsPresets"],[69,91,40,37],[69,92,40,38,"HIGH_QUALITY"],[69,104,41,6],[69,105,41,7],[70,8,43,6,"setRecording"],[70,20,43,18],[70,21,43,19,"newRecording"],[70,33,43,31],[70,34,43,32],[71,8,44,6,"setIsRecording"],[71,22,44,20],[71,23,44,21],[71,27,44,25],[71,28,44,26],[72,6,45,4],[72,7,45,5],[72,8,45,6],[72,15,45,13,"error"],[72,20,45,18],[72,22,45,20],[73,8,46,6,"console"],[73,15,46,13],[73,16,46,14,"error"],[73,21,46,19],[73,22,46,20],[73,50,46,48],[73,52,46,50,"error"],[73,57,46,55],[73,58,46,56],[74,8,47,6],[74,14,47,12,"error"],[74,19,47,17],[75,6,48,4],[76,4,49,2],[76,5,49,3],[76,7,49,5],[76,8,49,6,"permissionResponse"],[76,26,49,24],[76,28,49,26,"requestPermission"],[76,45,49,43],[76,46,49,44],[76,47,49,45],[77,4,51,2],[77,10,51,8,"stopRecording"],[77,23,51,21],[77,26,51,24],[77,30,51,24,"useCallback"],[77,36,51,35],[77,37,51,35,"useCallback"],[77,48,51,35],[77,50,51,36],[77,62,51,48],[78,6,52,4],[78,10,52,8],[78,11,52,9,"recording"],[78,20,52,18],[78,22,52,20],[79,8,53,6],[79,14,53,12],[79,18,53,16,"Error"],[79,23,53,21],[79,24,53,22],[79,45,53,43],[79,46,53,44],[80,6,54,4],[81,6,56,4],[81,10,56,8],[82,8,57,6],[82,14,57,12,"recording"],[82,23,57,21],[82,24,57,22,"stopAndUnloadAsync"],[82,42,57,40],[82,43,57,41],[82,44,57,42],[83,8,58,6],[83,14,58,12,"uri"],[83,17,58,15],[83,20,58,18,"recording"],[83,29,58,27],[83,30,58,28,"getURI"],[83,36,58,34],[83,37,58,35],[83,38,58,36],[84,8,60,6,"setRecording"],[84,20,60,18],[84,21,60,19],[84,25,60,23],[84,26,60,24],[85,8,61,6,"setIsRecording"],[85,22,61,20],[85,23,61,21],[85,28,61,26],[85,29,61,27],[86,8,63,6],[86,15,63,13,"uri"],[86,18,63,16],[87,6,64,4],[87,7,64,5],[87,8,64,6],[87,15,64,13,"error"],[87,20,64,18],[87,22,64,20],[88,8,65,6,"console"],[88,15,65,13],[88,16,65,14,"error"],[88,21,65,19],[88,22,65,20],[88,49,65,47],[88,51,65,49,"error"],[88,56,65,54],[88,57,65,55],[89,8,66,6],[89,14,66,12,"error"],[89,19,66,17],[90,6,67,4],[91,4,68,2],[91,5,68,3],[91,7,68,5],[91,8,68,6,"recording"],[91,17,68,15],[91,18,68,16],[91,19,68,17],[92,4,70,2],[92,10,70,8,"getAudioBlob"],[92,22,70,20],[92,25,70,23],[92,29,70,23,"useCallback"],[92,35,70,34],[92,36,70,34,"useCallback"],[92,47,70,34],[92,49,70,35],[92,55,70,42,"uri"],[92,58,70,53],[92,62,70,101],[93,6,71,4],[93,10,71,8],[94,8,72,6],[94,12,72,10,"Platform"],[94,20,72,18],[94,21,72,18,"default"],[94,28,72,18],[94,29,72,19,"OS"],[94,31,72,21],[94,36,72,26],[94,41,72,31],[94,43,72,33],[95,10,73,8],[95,16,73,14,"response"],[95,24,73,22],[95,27,73,25],[95,33,73,31,"fetch"],[95,38,73,36],[95,39,73,37,"uri"],[95,42,73,40],[95,43,73,41],[96,10,74,8],[96,16,74,14,"blob"],[96,20,74,18],[96,23,74,21],[96,29,74,27,"response"],[96,37,74,35],[96,38,74,36,"blob"],[96,42,74,40],[96,43,74,41],[96,44,74,42],[97,10,75,8],[97,17,75,15],[98,12,75,17,"blob"],[98,16,75,21],[99,12,75,23,"filename"],[99,20,75,31],[99,22,75,33],[100,10,75,46],[100,11,75,47],[101,8,76,6],[101,9,76,7],[101,15,76,13],[102,10,77,8],[103,10,78,8],[103,16,78,14,"base64"],[103,22,78,20],[103,25,78,23],[103,31,78,29,"FileSystem"],[103,41,78,39],[103,42,78,40,"readAsStringAsync"],[103,59,78,57],[103,60,78,58,"uri"],[103,63,78,61],[103,65,78,63],[104,12,79,10,"encoding"],[104,20,79,18],[104,22,79,20,"FileSystem"],[104,32,79,30],[104,33,79,31,"EncodingType"],[104,45,79,43],[104,46,79,44,"Base64"],[105,10,80,8],[105,11,80,9],[105,12,80,10],[107,10,82,8],[108,10,83,8],[108,16,83,14,"response"],[108,24,83,22],[108,27,83,25],[108,33,83,31,"fetch"],[108,38,83,36],[108,39,83,37],[108,64,83,62,"base64"],[108,70,83,68],[108,72,83,70],[108,73,83,71],[109,10,84,8],[109,16,84,14,"blob"],[109,20,84,18],[109,23,84,21],[109,29,84,27,"response"],[109,37,84,35],[109,38,84,36,"blob"],[109,42,84,40],[109,43,84,41],[109,44,84,42],[110,10,86,8],[110,17,86,15],[111,12,86,17,"blob"],[111,16,86,21],[112,12,86,23,"filename"],[112,20,86,31],[112,22,86,33],[113,10,86,45],[113,11,86,46],[114,8,87,6],[115,6,88,4],[115,7,88,5],[115,8,88,6],[115,15,88,13,"error"],[115,20,88,18],[115,22,88,20],[116,8,89,6,"console"],[116,15,89,13],[116,16,89,14,"error"],[116,21,89,19],[116,22,89,20],[116,49,89,47],[116,51,89,49,"error"],[116,56,89,54],[116,57,89,55],[117,8,90,6],[117,14,90,12,"error"],[117,19,90,17],[118,6,91,4],[119,4,92,2],[119,5,92,3],[119,7,92,5],[119,9,92,7],[119,10,92,8],[120,4,94,2],[120,11,94,9],[121,6,95,4,"isRecording"],[121,17,95,15],[122,6,96,4,"startRecording"],[122,20,96,18],[123,6,97,4,"stopRecording"],[123,19,97,17],[124,6,98,4,"getAudioBlob"],[124,18,98,16],[125,6,99,4,"permissionStatus"],[125,22,99,20],[125,24,99,22,"permissionResponse"],[125,42,99,40],[125,44,99,42,"status"],[126,4,100,2],[126,5,100,3],[127,2,101,0],[128,2,101,1,"_s"],[128,4,101,1],[128,5,6,16,"useAudioRecording"],[128,22,6,33],[129,4,6,33],[129,12,9,50,"Audio"],[129,19,9,55],[129,20,9,55,"Audio"],[129,25,9,55],[129,26,9,56,"usePermissions"],[129,40,9,70],[130,2,9,70],[131,0,9,70],[131,3]],"functionMap":{"names":["<global>","useAudioRecording","useEffect$argument_0","<anonymous>","startRecording","stopRecording","getAudioBlob"],"mappings":"AAA;OCK;YCK;WCC;KDI;GDC;qCGE;GH8B;oCIE;GJiB;mCKE;GLsB;CDS"},"hasCjsExports":false},"type":"js/module"}]}