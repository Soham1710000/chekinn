{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-av","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":32,"index":90}}],"key":"VxVG0TWBdB+Oc1qOQ32HKtN+H5M=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":91},"end":{"line":3,"column":47,"index":138}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":139},"end":{"line":4,"column":40,"index":179}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.useAudioRecording = useAudioRecording;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _expoAv = require(_dependencyMap[3], \"expo-av\");\n  var _expoFileSystem = require(_dependencyMap[4], \"expo-file-system\");\n  var FileSystem = _interopNamespace(_expoFileSystem);\n  var _reactNative = require(_dependencyMap[5], \"react-native\");\n  function useAudioRecording() {\n    _s();\n    var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      recording = _useState2[0],\n      setRecording = _useState2[1];\n    var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      isRecording = _useState4[0],\n      setIsRecording = _useState4[1];\n    var _Audio$usePermissions = _expoAv.Audio.usePermissions(),\n      _Audio$usePermissions2 = (0, _slicedToArray.default)(_Audio$usePermissions, 2),\n      permissionResponse = _Audio$usePermissions2[0],\n      requestPermission = _Audio$usePermissions2[1];\n    (0, _react.useEffect)(() => {\n      return () => {\n        if (recording) {\n          recording.stopAndUnloadAsync().catch(console.error);\n        }\n      };\n    }, [recording]);\n    var startRecording = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator.default)(function* () {\n      try {\n        // Check permissions\n        if (permissionResponse?.status !== 'granted') {\n          console.log('Requesting microphone permission...');\n          var response = yield requestPermission();\n          if (response.status !== 'granted') {\n            throw new Error('Microphone permission was denied');\n          }\n        }\n\n        // Set audio mode\n        yield _expoAv.Audio.setAudioModeAsync({\n          allowsRecordingIOS: true,\n          playsInSilentModeIOS: true,\n          staysActiveInBackground: false,\n          interruptionModeAndroid: _expoAv.Audio.AndroidAudioUsage.VOICE_COMMUNICATION\n        });\n\n        // Start recording\n        var _yield$Audio$Recordin = yield _expoAv.Audio.Recording.createAsync(_expoAv.Audio.RecordingOptionsPresets.HIGH_QUALITY),\n          newRecording = _yield$Audio$Recordin.recording;\n        setRecording(newRecording);\n        setIsRecording(true);\n      } catch (error) {\n        console.error('Failed to start recording:', error);\n        throw error;\n      }\n    }), [permissionResponse, requestPermission]);\n    var stopRecording = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator.default)(function* () {\n      if (!recording) {\n        throw new Error('No active recording');\n      }\n      try {\n        yield recording.stopAndUnloadAsync();\n        var uri = recording.getURI();\n        setRecording(null);\n        setIsRecording(false);\n        return uri;\n      } catch (error) {\n        console.error('Failed to stop recording:', error);\n        throw error;\n      }\n    }), [recording]);\n    var getAudioBlob = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* (uri) {\n        try {\n          if (_reactNative.Platform.OS === 'web') {\n            var response = yield fetch(uri);\n            var blob = yield response.blob();\n            return {\n              blob,\n              filename: 'audio.webm'\n            };\n          } else {\n            // For native platforms, read as base64 and convert to blob\n            var base64 = yield FileSystem.readAsStringAsync(uri, {\n              encoding: FileSystem.EncodingType.Base64\n            });\n\n            // Convert base64 to blob\n            var _response = yield fetch(`data:audio/mp3;base64,${base64}`);\n            var _blob = yield _response.blob();\n            return {\n              blob: _blob,\n              filename: 'audio.mp3'\n            };\n          }\n        } catch (error) {\n          console.error('Failed to get audio blob:', error);\n          throw error;\n        }\n      });\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }(), []);\n    return {\n      isRecording,\n      startRecording,\n      stopRecording,\n      getAudioBlob,\n      permissionStatus: permissionResponse?.status\n    };\n  }\n  _s(useAudioRecording, \"851t8NlxT567QcRIBQpL2O86daA=\", false, function () {\n    return [_expoAv.Audio.usePermissions];\n  });\n});","lineCount":147,"map":[[28,2,6,0,"exports"],[28,9,6,0],[28,10,6,0,"useAudioRecording"],[28,27,6,0],[28,30,6,0,"useAudioRecording"],[28,47,6,0],[29,2,101,1],[29,6,101,1,"_babelRuntimeHelpersAsyncToGenerator"],[29,42,101,1],[29,45,101,1,"require"],[29,52,101,1],[29,53,101,1,"_dependencyMap"],[29,67,101,1],[30,2,101,1],[30,6,101,1,"_asyncToGenerator"],[30,23,101,1],[30,26,101,1,"_interopDefault"],[30,41,101,1],[30,42,101,1,"_babelRuntimeHelpersAsyncToGenerator"],[30,78,101,1],[31,2,101,1],[31,6,101,1,"_babelRuntimeHelpersSlicedToArray"],[31,39,101,1],[31,42,101,1,"require"],[31,49,101,1],[31,50,101,1,"_dependencyMap"],[31,64,101,1],[32,2,101,1],[32,6,101,1,"_slicedToArray"],[32,20,101,1],[32,23,101,1,"_interopDefault"],[32,38,101,1],[32,39,101,1,"_babelRuntimeHelpersSlicedToArray"],[32,72,101,1],[33,2,1,0],[33,6,1,0,"_react"],[33,12,1,0],[33,15,1,0,"require"],[33,22,1,0],[33,23,1,0,"_dependencyMap"],[33,37,1,0],[34,2,2,0],[34,6,2,0,"_expoAv"],[34,13,2,0],[34,16,2,0,"require"],[34,23,2,0],[34,24,2,0,"_dependencyMap"],[34,38,2,0],[35,2,3,0],[35,6,3,0,"_expoFileSystem"],[35,21,3,0],[35,24,3,0,"require"],[35,31,3,0],[35,32,3,0,"_dependencyMap"],[35,46,3,0],[36,2,3,0],[36,6,3,0,"FileSystem"],[36,16,3,0],[36,19,3,0,"_interopNamespace"],[36,36,3,0],[36,37,3,0,"_expoFileSystem"],[36,52,3,0],[37,2,4,0],[37,6,4,0,"_reactNative"],[37,18,4,0],[37,21,4,0,"require"],[37,28,4,0],[37,29,4,0,"_dependencyMap"],[37,43,4,0],[38,2,6,7],[38,11,6,16,"useAudioRecording"],[38,28,6,33,"useAudioRecording"],[38,29,6,33],[38,31,6,36],[39,4,6,36,"_s"],[39,6,6,36],[40,4,7,2],[40,8,7,2,"_useState"],[40,17,7,2],[40,20,7,36],[40,24,7,36,"useState"],[40,30,7,44],[40,31,7,44,"useState"],[40,39,7,44],[40,41,7,69],[40,45,7,73],[40,46,7,74],[41,6,7,74,"_useState2"],[41,16,7,74],[41,23,7,74,"_slicedToArray"],[41,37,7,74],[41,38,7,74,"default"],[41,45,7,74],[41,47,7,74,"_useState"],[41,56,7,74],[42,6,7,9,"recording"],[42,15,7,18],[42,18,7,18,"_useState2"],[42,28,7,18],[43,6,7,20,"setRecording"],[43,18,7,32],[43,21,7,32,"_useState2"],[43,31,7,32],[44,4,8,2],[44,8,8,2,"_useState3"],[44,18,8,2],[44,21,8,40],[44,25,8,40,"useState"],[44,31,8,48],[44,32,8,48,"useState"],[44,40,8,48],[44,42,8,49],[44,47,8,54],[44,48,8,55],[45,6,8,55,"_useState4"],[45,16,8,55],[45,23,8,55,"_slicedToArray"],[45,37,8,55],[45,38,8,55,"default"],[45,45,8,55],[45,47,8,55,"_useState3"],[45,57,8,55],[46,6,8,9,"isRecording"],[46,17,8,20],[46,20,8,20,"_useState4"],[46,30,8,20],[47,6,8,22,"setIsRecording"],[47,20,8,36],[47,23,8,36,"_useState4"],[47,33,8,36],[48,4,9,2],[48,8,9,2,"_Audio$usePermissions"],[48,29,9,2],[48,32,9,50,"Audio"],[48,39,9,55],[48,40,9,55,"Audio"],[48,45,9,55],[48,46,9,56,"usePermissions"],[48,60,9,70],[48,61,9,71],[48,62,9,72],[49,6,9,72,"_Audio$usePermissions2"],[49,28,9,72],[49,35,9,72,"_slicedToArray"],[49,49,9,72],[49,50,9,72,"default"],[49,57,9,72],[49,59,9,72,"_Audio$usePermissions"],[49,80,9,72],[50,6,9,9,"permissionResponse"],[50,24,9,27],[50,27,9,27,"_Audio$usePermissions2"],[50,49,9,27],[51,6,9,29,"requestPermission"],[51,23,9,46],[51,26,9,46,"_Audio$usePermissions2"],[51,48,9,46],[52,4,11,2],[52,8,11,2,"useEffect"],[52,14,11,11],[52,15,11,11,"useEffect"],[52,24,11,11],[52,26,11,12],[52,32,11,18],[53,6,12,4],[53,13,12,11],[53,19,12,17],[54,8,13,6],[54,12,13,10,"recording"],[54,21,13,19],[54,23,13,21],[55,10,14,8,"recording"],[55,19,14,17],[55,20,14,18,"stopAndUnloadAsync"],[55,38,14,36],[55,39,14,37],[55,40,14,38],[55,41,14,39,"catch"],[55,46,14,44],[55,47,14,45,"console"],[55,54,14,52],[55,55,14,53,"error"],[55,60,14,58],[55,61,14,59],[56,8,15,6],[57,6,16,4],[57,7,16,5],[58,4,17,2],[58,5,17,3],[58,7,17,5],[58,8,17,6,"recording"],[58,17,17,15],[58,18,17,16],[58,19,17,17],[59,4,19,2],[59,8,19,8,"startRecording"],[59,22,19,22],[59,25,19,25],[59,29,19,25,"useCallback"],[59,35,19,36],[59,36,19,36,"useCallback"],[59,47,19,36],[59,66,19,36,"_asyncToGenerator"],[59,83,19,36],[59,84,19,36,"default"],[59,91,19,36],[59,93,19,37],[59,106,19,49],[60,6,20,4],[60,10,20,8],[61,8,21,6],[62,8,22,6],[62,12,22,10,"permissionResponse"],[62,30,22,28],[62,32,22,30,"status"],[62,38,22,36],[62,43,22,41],[62,52,22,50],[62,54,22,52],[63,10,23,8,"console"],[63,17,23,15],[63,18,23,16,"log"],[63,21,23,19],[63,22,23,20],[63,59,23,57],[63,60,23,58],[64,10,24,8],[64,14,24,14,"response"],[64,22,24,22],[64,31,24,31,"requestPermission"],[64,48,24,48],[64,49,24,49],[64,50,24,50],[65,10,25,8],[65,14,25,12,"response"],[65,22,25,20],[65,23,25,21,"status"],[65,29,25,27],[65,34,25,32],[65,43,25,41],[65,45,25,43],[66,12,26,10],[66,18,26,16],[66,22,26,20,"Error"],[66,27,26,25],[66,28,26,26],[66,62,26,60],[66,63,26,61],[67,10,27,8],[68,8,28,6],[70,8,30,6],[71,8,31,6],[71,14,31,12,"Audio"],[71,21,31,17],[71,22,31,17,"Audio"],[71,27,31,17],[71,28,31,18,"setAudioModeAsync"],[71,45,31,35],[71,46,31,36],[72,10,32,8,"allowsRecordingIOS"],[72,28,32,26],[72,30,32,28],[72,34,32,32],[73,10,33,8,"playsInSilentModeIOS"],[73,30,33,28],[73,32,33,30],[73,36,33,34],[74,10,34,8,"staysActiveInBackground"],[74,33,34,31],[74,35,34,33],[74,40,34,38],[75,10,35,8,"interruptionModeAndroid"],[75,33,35,31],[75,35,35,33,"Audio"],[75,42,35,38],[75,43,35,38,"Audio"],[75,48,35,38],[75,49,35,39,"AndroidAudioUsage"],[75,66,35,56],[75,67,35,57,"VOICE_COMMUNICATION"],[76,8,36,6],[76,9,36,7],[76,10,36,8],[78,8,38,6],[79,8,39,6],[79,12,39,6,"_yield$Audio$Recordin"],[79,33,39,6],[79,42,39,48,"Audio"],[79,49,39,53],[79,50,39,53,"Audio"],[79,55,39,53],[79,56,39,54,"Recording"],[79,65,39,63],[79,66,39,64,"createAsync"],[79,77,39,75],[79,78,40,8,"Audio"],[79,85,40,13],[79,86,40,13,"Audio"],[79,91,40,13],[79,92,40,14,"RecordingOptionsPresets"],[79,115,40,37],[79,116,40,38,"HIGH_QUALITY"],[79,128,41,6],[79,129,41,7],[80,10,39,25,"newRecording"],[80,22,39,37],[80,25,39,37,"_yield$Audio$Recordin"],[80,46,39,37],[80,47,39,14,"recording"],[80,56,39,23],[81,8,43,6,"setRecording"],[81,20,43,18],[81,21,43,19,"newRecording"],[81,33,43,31],[81,34,43,32],[82,8,44,6,"setIsRecording"],[82,22,44,20],[82,23,44,21],[82,27,44,25],[82,28,44,26],[83,6,45,4],[83,7,45,5],[83,8,45,6],[83,15,45,13,"error"],[83,20,45,18],[83,22,45,20],[84,8,46,6,"console"],[84,15,46,13],[84,16,46,14,"error"],[84,21,46,19],[84,22,46,20],[84,50,46,48],[84,52,46,50,"error"],[84,57,46,55],[84,58,46,56],[85,8,47,6],[85,14,47,12,"error"],[85,19,47,17],[86,6,48,4],[87,4,49,2],[87,5,49,3],[87,8,49,5],[87,9,49,6,"permissionResponse"],[87,27,49,24],[87,29,49,26,"requestPermission"],[87,46,49,43],[87,47,49,44],[87,48,49,45],[88,4,51,2],[88,8,51,8,"stopRecording"],[88,21,51,21],[88,24,51,24],[88,28,51,24,"useCallback"],[88,34,51,35],[88,35,51,35,"useCallback"],[88,46,51,35],[88,65,51,35,"_asyncToGenerator"],[88,82,51,35],[88,83,51,35,"default"],[88,90,51,35],[88,92,51,36],[88,105,51,48],[89,6,52,4],[89,10,52,8],[89,11,52,9,"recording"],[89,20,52,18],[89,22,52,20],[90,8,53,6],[90,14,53,12],[90,18,53,16,"Error"],[90,23,53,21],[90,24,53,22],[90,45,53,43],[90,46,53,44],[91,6,54,4],[92,6,56,4],[92,10,56,8],[93,8,57,6],[93,14,57,12,"recording"],[93,23,57,21],[93,24,57,22,"stopAndUnloadAsync"],[93,42,57,40],[93,43,57,41],[93,44,57,42],[94,8,58,6],[94,12,58,12,"uri"],[94,15,58,15],[94,18,58,18,"recording"],[94,27,58,27],[94,28,58,28,"getURI"],[94,34,58,34],[94,35,58,35],[94,36,58,36],[95,8,60,6,"setRecording"],[95,20,60,18],[95,21,60,19],[95,25,60,23],[95,26,60,24],[96,8,61,6,"setIsRecording"],[96,22,61,20],[96,23,61,21],[96,28,61,26],[96,29,61,27],[97,8,63,6],[97,15,63,13,"uri"],[97,18,63,16],[98,6,64,4],[98,7,64,5],[98,8,64,6],[98,15,64,13,"error"],[98,20,64,18],[98,22,64,20],[99,8,65,6,"console"],[99,15,65,13],[99,16,65,14,"error"],[99,21,65,19],[99,22,65,20],[99,49,65,47],[99,51,65,49,"error"],[99,56,65,54],[99,57,65,55],[100,8,66,6],[100,14,66,12,"error"],[100,19,66,17],[101,6,67,4],[102,4,68,2],[102,5,68,3],[102,8,68,5],[102,9,68,6,"recording"],[102,18,68,15],[102,19,68,16],[102,20,68,17],[103,4,70,2],[103,8,70,8,"getAudioBlob"],[103,20,70,20],[103,23,70,23],[103,27,70,23,"useCallback"],[103,33,70,34],[103,34,70,34,"useCallback"],[103,45,70,34],[104,6,70,34],[104,10,70,34,"_ref3"],[104,15,70,34],[104,22,70,34,"_asyncToGenerator"],[104,39,70,34],[104,40,70,34,"default"],[104,47,70,34],[104,49,70,35],[104,60,70,42,"uri"],[104,63,70,53],[104,65,70,101],[105,8,71,4],[105,12,71,8],[106,10,72,6],[106,14,72,10,"Platform"],[106,26,72,18],[106,27,72,18,"Platform"],[106,35,72,18],[106,36,72,19,"OS"],[106,38,72,21],[106,43,72,26],[106,48,72,31],[106,50,72,33],[107,12,73,8],[107,16,73,14,"response"],[107,24,73,22],[107,33,73,31,"fetch"],[107,38,73,36],[107,39,73,37,"uri"],[107,42,73,40],[107,43,73,41],[108,12,74,8],[108,16,74,14,"blob"],[108,20,74,18],[108,29,74,27,"response"],[108,37,74,35],[108,38,74,36,"blob"],[108,42,74,40],[108,43,74,41],[108,44,74,42],[109,12,75,8],[109,19,75,15],[110,14,75,17,"blob"],[110,18,75,21],[111,14,75,23,"filename"],[111,22,75,31],[111,24,75,33],[112,12,75,46],[112,13,75,47],[113,10,76,6],[113,11,76,7],[113,17,76,13],[114,12,77,8],[115,12,78,8],[115,16,78,14,"base64"],[115,22,78,20],[115,31,78,29,"FileSystem"],[115,41,78,39],[115,42,78,40,"readAsStringAsync"],[115,59,78,57],[115,60,78,58,"uri"],[115,63,78,61],[115,65,78,63],[116,14,79,10,"encoding"],[116,22,79,18],[116,24,79,20,"FileSystem"],[116,34,79,30],[116,35,79,31,"EncodingType"],[116,47,79,43],[116,48,79,44,"Base64"],[117,12,80,8],[117,13,80,9],[117,14,80,10],[119,12,82,8],[120,12,83,8],[120,16,83,14,"response"],[120,25,83,22],[120,34,83,31,"fetch"],[120,39,83,36],[120,40,83,37],[120,65,83,62,"base64"],[120,71,83,68],[120,73,83,70],[120,74,83,71],[121,12,84,8],[121,16,84,14,"blob"],[121,21,84,18],[121,30,84,27,"response"],[121,39,84,35],[121,40,84,36,"blob"],[121,44,84,40],[121,45,84,41],[121,46,84,42],[122,12,86,8],[122,19,86,15],[123,14,86,17,"blob"],[123,18,86,21],[123,20,86,17,"blob"],[123,25,86,21],[124,14,86,23,"filename"],[124,22,86,31],[124,24,86,33],[125,12,86,45],[125,13,86,46],[126,10,87,6],[127,8,88,4],[127,9,88,5],[127,10,88,6],[127,17,88,13,"error"],[127,22,88,18],[127,24,88,20],[128,10,89,6,"console"],[128,17,89,13],[128,18,89,14,"error"],[128,23,89,19],[128,24,89,20],[128,51,89,47],[128,53,89,49,"error"],[128,58,89,54],[128,59,89,55],[129,10,90,6],[129,16,90,12,"error"],[129,21,90,17],[130,8,91,4],[131,6,92,2],[131,7,92,3],[132,6,92,3],[132,23,92,3,"_x"],[132,25,92,3],[133,8,92,3],[133,15,92,3,"_ref3"],[133,20,92,3],[133,21,92,3,"apply"],[133,26,92,3],[133,33,92,3,"arguments"],[133,42,92,3],[134,6,92,3],[135,4,92,3],[135,9,92,5],[135,11,92,7],[135,12,92,8],[136,4,94,2],[136,11,94,9],[137,6,95,4,"isRecording"],[137,17,95,15],[138,6,96,4,"startRecording"],[138,20,96,18],[139,6,97,4,"stopRecording"],[139,19,97,17],[140,6,98,4,"getAudioBlob"],[140,18,98,16],[141,6,99,4,"permissionStatus"],[141,22,99,20],[141,24,99,22,"permissionResponse"],[141,42,99,40],[141,44,99,42,"status"],[142,4,100,2],[142,5,100,3],[143,2,101,0],[144,2,101,1,"_s"],[144,4,101,1],[144,5,6,16,"useAudioRecording"],[144,22,6,33],[145,4,6,33],[145,12,9,50,"Audio"],[145,19,9,55],[145,20,9,55,"Audio"],[145,25,9,55],[145,26,9,56,"usePermissions"],[145,40,9,70],[146,2,9,70],[147,0,9,70],[147,3]],"functionMap":{"names":["<global>","useAudioRecording","useEffect$argument_0","<anonymous>","startRecording","stopRecording","getAudioBlob"],"mappings":"AAA;OCK;YCK;WCC;KDI;GDC;qCGE;GH8B;oCIE;GJiB;mCKE;GLsB;CDS"},"hasCjsExports":false},"type":"js/module"}]}