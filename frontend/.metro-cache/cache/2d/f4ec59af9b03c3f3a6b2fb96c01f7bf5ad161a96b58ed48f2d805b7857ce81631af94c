{"dependencies":[{"name":"./ViewabilityHelper","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"m0bAZ6cpmB2UiZRRtXN9qxxPTPQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"default\",{enumerable:!0,get:function(){return l}});var e,t=r(d[0],\"./ViewabilityHelper\"),s=(e=t)&&e.__esModule?e:{default:e};class l{constructor(e){var t;this.viewabilityHelpers=[],this.hasInteracted=!1,this.dispose=()=>{this.viewabilityHelpers.forEach(e=>e.dispose())},this.onVisibleIndicesChanged=e=>{this.updateViewableItems(e)},this.recordInteraction=()=>{this.hasInteracted||(this.hasInteracted=!0,this.viewabilityHelpers.forEach(e=>{e.hasInteracted=!0}),this.updateViewableItems())},this.updateViewableItems=e=>{var t;const s=this.rvManager.getWindowSize();if(void 0===s||!this.shouldListenToVisibleIndices)return;const l=(null!==(t=this.rvManager.getAbsoluteLastScrollOffset())&&void 0!==t?t:0)-this.rvManager.firstItemOffset;this.viewabilityHelpers.forEach(t=>{var n;t.updateViewableItems(null!==(n=this.rvManager.props.horizontal)&&void 0!==n&&n,l,s,e=>this.rvManager.getLayout(e),e)})},this.recomputeViewableItems=()=>{this.viewabilityHelpers.forEach(e=>e.clearLastReportedViewableIndices()),this.updateViewableItems()},this.createViewabilityHelper=(e,t)=>{const l=(e,t)=>{const s=this.rvManager.props.data[e],l=void 0===s||void 0===this.rvManager.props.keyExtractor?e.toString():this.rvManager.props.keyExtractor(s,e);return{index:e,isViewable:t,item:s,key:l,timestamp:Date.now()}};return new s.default(e,(e,s,n)=>{null==t||t({viewableItems:e.map(e=>l(e,!0)),changed:[...s.map(e=>l(e,!0)),...n.map(e=>l(e,!1))]})})},this.rvManager=e,null!==e.props.onViewableItemsChanged&&void 0!==e.props.onViewableItemsChanged&&this.viewabilityHelpers.push(this.createViewabilityHelper(e.props.viewabilityConfig,t=>{var s,l;null===(l=(s=e.props).onViewableItemsChanged)||void 0===l||l.call(s,t)})),(null!==(t=e.props.viewabilityConfigCallbackPairs)&&void 0!==t?t:[]).forEach((t,s)=>{this.viewabilityHelpers.push(this.createViewabilityHelper(t.viewabilityConfig,t=>{var l,n;const o=null===(n=null===(l=e.props.viewabilityConfigCallbackPairs)||void 0===l?void 0:l[s])||void 0===n?void 0:n.onViewableItemsChanged;null==o||o(t)}))})}get shouldListenToVisibleIndices(){return this.viewabilityHelpers.length>0}}});","lineCount":1,"map":[[1,92,5,15,"Object"],[1,99,5,15,"defineProperty"],[1,114,5,15,"_e"],[1,117,5,15],[1,128,5,15,"enumerable"],[1,140,5,15],[1,142,5,15,"get"],[1,146,5,15],[1,164,5,15,"ViewabilityManager"],[1,165,5,15],[1,169,1,0],[1,173],[1,175,1,0,"_ViewabilityHelper"],[1,177,1,0,"r"],[1,179,1,0,"d"],[1,181,1,0],[1,207,1,0,"ViewabilityHelper"],[1,210],[1,212,1,0,"_ViewabilityHelper"],[1,216],[1,243,5,15],[1,249,5,21,"ViewabilityManager"],[1,251,6,4,"constructor"],[1,263,6,16,"rvManager"],[1,266,7,8],[1,270,7,12,"_a"],[1,272,8,8,"this"],[1,277,8,13,"viewabilityHelpers"],[1,296,8,34],[1,299,9,8,"this"],[1,304,9,13,"hasInteracted"],[1,319,9,29],[1,321,10,8,"this"],[1,326,10,13,"dispose"],[1,334,10,23],[1,339,11,12,"this"],[1,344,11,17,"viewabilityHelpers"],[1,363,11,36,"forEach"],[1,371,11,45,"viewabilityHelper"],[1,374,11,67,"viewabilityHelper"],[1,376,11,85,"dispose"],[1,388,13,8,"this"],[1,393,13,13,"onVisibleIndicesChanged"],[1,417,13,40,"all"],[1,421,14,12,"this"],[1,426,14,17,"updateViewableItems"],[1,446,14,37,"all"],[1,450,16,8,"this"],[1,455,16,13,"recordInteraction"],[1,473,16,33],[1,478,17,16,"this"],[1,483,17,21,"hasInteracted"],[1,499,20,12,"this"],[1,504,20,17,"hasInteracted"],[1,519,20,33],[1,521,21,12,"this"],[1,526,21,17,"viewabilityHelpers"],[1,545,21,36,"forEach"],[1,553,21,45,"viewabilityHelper"],[1,557,22,16,"viewabilityHelper"],[1,559,22,34,"hasInteracted"],[1,574,22,50],[1,578,24,12,"this"],[1,583,24,17,"updateViewableItems"],[1,607,26,8,"this"],[1,612,26,13,"updateViewableItems"],[1,632,26,36,"newViewableIndices"],[1,636,27,12],[1,640,27,16,"_a"],[1,642,28,12],[1,648,28,18,"listSize"],[1,650,28,29,"this"],[1,655,28,34,"rvManager"],[1,665,28,44,"getWindowSize"],[1,681,29,12],[1,689,29,29,"undefined"],[1,693,29,16,"listSize"],[1,697,29,43,"this"],[1,702,29,48,"shouldListenToVisibleIndices"],[1,731,30,16],[1,738,32,12],[1,744,32,18,"scrollOffset"],[1,747,32,90],[1,755,32,35,"_a"],[1,757,32,40,"this"],[1,762,32,45,"rvManager"],[1,772,32,55,"getAbsoluteLastScrollOffset"],[1,809,32,105],[1,813,32,98,"_a"],[1,815,32,114,"_a"],[1,817,32,119],[1,820,33,16,"this"],[1,825,33,21,"rvManager"],[1,835,33,31,"firstItemOffset"],[1,851,34,12,"this"],[1,856,34,17,"viewabilityHelpers"],[1,875,34,36,"forEach"],[1,883,34,45,"viewabilityHelper"],[1,887,35,16],[1,891,35,20,"_a"],[1,893,36,16,"viewabilityHelper"],[1,895,36,34,"updateViewableItems"],[1,915,36,97],[1,923,36,55,"_a"],[1,925,36,60,"this"],[1,930,36,65,"rvManager"],[1,940,36,75,"props"],[1,946,36,81,"horizontal"],[1,964,36,112],[1,968,36,105,"_a"],[1,971,36,121,"_a"],[1,973,36,133,"scrollOffset"],[1,975,36,147,"listSize"],[1,977,36,158,"index"],[1,980,36,168,"this"],[1,985,36,173,"rvManager"],[1,995,36,183,"getLayout"],[1,1005,36,193,"index"],[1,1008,36,201,"newViewableIndices"],[1,1014,39,8,"this"],[1,1019,39,13,"recomputeViewableItems"],[1,1042,39,38],[1,1047,40,12,"this"],[1,1052,40,17,"viewabilityHelpers"],[1,1071,40,36,"forEach"],[1,1079,40,45,"viewabilityHelper"],[1,1082,40,67,"viewabilityHelper"],[1,1084,40,85,"clearLastReportedViewableIndices"],[1,1120,41,12,"this"],[1,1125,41,17,"updateViewableItems"],[1,1148,47,8,"this"],[1,1153,47,13,"createViewabilityHelper"],[1,1177,47,39],[1,1178,47,40,"viewabilityConfig"],[1,1180,47,59,"onViewableItemsChanged"],[1,1185,48,12],[1,1191,48,18,"mapViewToken"],[1,1193,48,33,"mapViewToken"],[1,1194,48,34,"index"],[1,1196,48,41,"isViewable"],[1,1201,49,16],[1,1207,49,22,"item"],[1,1209,49,29,"this"],[1,1214,49,34,"rvManager"],[1,1224,49,44,"props"],[1,1230,49,50,"data"],[1,1235,49,55,"index"],[1,1238,50,22,"key"],[1,1245,50,37,"undefined"],[1,1249,50,28,"item"],[1,1257,50,88,"undefined"],[1,1261,50,50,"this"],[1,1266,50,55,"rvManager"],[1,1276,50,65,"props"],[1,1282,50,71,"keyExtractor"],[1,1295,51,22,"index"],[1,1297,51,28,"toString"],[1,1308,52,22,"this"],[1,1313,52,27,"rvManager"],[1,1323,52,37,"props"],[1,1329,52,43,"keyExtractor"],[1,1342,52,56,"item"],[1,1344,52,62,"index"],[1,1347,53,16],[1,1353,53,23],[1,1354,54,20,"index"],[1,1362,55,20,"isViewable"],[1,1375,56,20,"item"],[1,1382,57,20,"key"],[1,1388,58,20,"timestamp"],[1,1398,58,31,"Date"],[1,1403,58,36,"now"],[1,1411,61,12],[1,1418,61,19],[1,1422,61,23,"ViewabilityHelper"],[1,1424,61,40,"default"],[1,1432,61,41,"viewabilityConfig"],[1,1434,61,60],[1,1435,61,61,"indices"],[1,1437,61,70,"newlyVisibleIndices"],[1,1439,61,91,"newlyNonvisibleIndices"],[1,1444,62,16,"onViewableItemsChanged"],[1,1453,62,96,"onViewableItemsChanged"],[1,1455,62,119],[1,1456,63,20,"viewableItems"],[1,1470,63,35,"indices"],[1,1472,63,43,"map"],[1,1476,63,48,"index"],[1,1479,63,58,"mapViewToken"],[1,1481,63,71,"index"],[1,1484,63,78],[1,1488,64,20,"changed"],[1,1496,64,29],[1,1500,65,27,"newlyVisibleIndices"],[1,1502,65,47,"map"],[1,1506,65,52,"index"],[1,1509,65,62,"mapViewToken"],[1,1511,65,75,"index"],[1,1514,65,82],[1,1521,66,27,"newlyNonvisibleIndices"],[1,1523,66,50,"map"],[1,1527,66,55,"index"],[1,1530,66,65,"mapViewToken"],[1,1532,66,78,"index"],[1,1535,66,85],[1,1545,71,8,"this"],[1,1550,71,13,"rvManager"],[1,1560,71,25,"rvManager"],[1,1562,72,55],[1,1569,72,12,"rvManager"],[1,1571,72,22,"props"],[1,1577,72,28,"onViewableItemsChanged"],[1,1606,73,55,"undefined"],[1,1610,73,12,"rvManager"],[1,1612,73,22,"props"],[1,1618,73,28,"onViewableItemsChanged"],[1,1642,74,12,"this"],[1,1647,74,17,"viewabilityHelpers"],[1,1666,74,36,"push"],[1,1671,74,41,"this"],[1,1676,74,46,"createViewabilityHelper"],[1,1700,74,70,"rvManager"],[1,1702,74,80,"props"],[1,1708,74,86,"viewabilityConfig"],[1,1726,74,106,"info"],[1,1730,75,16],[1,1734,75,20,"_a"],[1,1736,75,24,"_b"],[1,1738,76,73],[1,1746,76,17,"_b"],[1,1749,76,23,"_a"],[1,1751,76,28,"rvManager"],[1,1753,76,38,"props"],[1,1760,76,45,"onViewableItemsChanged"],[1,1790,76,88],[1,1794,76,81,"_b"],[1,1797,76,106,"_b"],[1,1799,76,109,"call"],[1,1804,76,114,"_a"],[1,1806,76,118,"info"],[1,1813,79,67],[1,1821,79,10,"_a"],[1,1823,79,15,"rvManager"],[1,1825,79,25,"props"],[1,1831,79,31,"viewabilityConfigCallbackPairs"],[1,1869,79,82],[1,1873,79,75,"_a"],[1,1875,79,91,"_a"],[1,1877,79,96],[1,1881,79,100,"forEach"],[1,1889,79,108],[1,1890,79,109,"pair"],[1,1892,79,115,"index"],[1,1897,80,12,"this"],[1,1902,80,17,"viewabilityHelpers"],[1,1921,80,36,"push"],[1,1926,80,41,"this"],[1,1931,80,46,"createViewabilityHelper"],[1,1955,80,70,"pair"],[1,1957,80,75,"viewabilityConfig"],[1,1975,80,95,"info"],[1,1979,81,16],[1,1983,81,20,"_a"],[1,1985,81,24,"_b"],[1,1987,82,16],[1,1993,82,22,"callback"],[1,1995,82,145],[1,2003,82,34,"_b"],[1,2005,82,97],[1,2013,82,40,"_a"],[1,2015,82,45,"rvManager"],[1,2017,82,55,"props"],[1,2023,82,61,"viewabilityConfigCallbackPairs"],[1,2061,82,112],[1,2065,82,105,"_a"],[1,2072,82,121],[1,2074,82,130,"_a"],[1,2076,82,133,"index"],[1,2086,82,160],[1,2090,82,153,"_b"],[1,2097,82,169],[1,2099,82,178,"_b"],[1,2101,82,181,"onViewableItemsChanged"],[1,2124,83,16,"callback"],[1,2133,83,68,"callback"],[1,2135,83,77,"info"],[1,2142,86,4],[1,2143,90,4],[1,2175,90,8,"shouldListenToVisibleIndices"],[1,2178,91,8],[1,2185,91,15,"this"],[1,2190,91,20,"viewabilityHelpers"],[1,2209,91,39,"length"],[1,2216,91,48],[1,2217,92,4],[1,2219,93,1],[1,2222]],"functionMap":{"names":["<global>","ViewabilityManager","constructor","dispose","viewabilityHelpers.forEach$argument_0","onVisibleIndicesChanged","recordInteraction","updateViewableItems","viewabilityHelper.updateViewableItems$argument_3","recomputeViewableItems","createViewabilityHelper","mapViewToken","ViewabilityHelper$argument_1","indices.map$argument_0","newlyVisibleIndices.map$argument_0","newlyNonvisibleIndices.map$argument_0","createViewabilityHelper$argument_1","forEach$argument_0","get__shouldListenToVisibleIndices"],"mappings":"AAA;eCI;ICC;uBCI;4CCC,kDD;SDC;uCGC;SHE;iCIC;4CFK;aEE;SJE;mCKC;4CHQ;6JIE,0CJ;aGC;SLC;sCOC;4CLC,2EK;SPE;uCQK;iCCC;aDY;4DEC;+CCE,oCD;mDEE,oCF;sDGC,qCH;aFG;SRC;yGcI;adG;4GeE;8FDC;aCI;SfC;KDC;IiBI;KjBE;CDC"},"hasCjsExports":false},"type":"js/module"}]}