{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-av","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":32,"index":90}}],"key":"VxVG0TWBdB+Oc1qOQ32HKtN+H5M=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":91},"end":{"line":3,"column":47,"index":138}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useAudioRecording = useAudioRecording;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoAv = require(_dependencyMap[1], \"expo-av\");\n  var _expoFileSystem = require(_dependencyMap[2], \"expo-file-system\");\n  var FileSystem = _interopNamespace(_expoFileSystem);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  function useAudioRecording() {\n    const [recording, setRecording] = (0, _react.useState)(null);\n    const [isRecording, setIsRecording] = (0, _react.useState)(false);\n    const [permissionResponse, requestPermission] = _expoAv.Audio.usePermissions();\n    (0, _react.useEffect)(() => {\n      return () => {\n        if (recording) {\n          recording.stopAndUnloadAsync().catch(console.error);\n        }\n      };\n    }, [recording]);\n    const startRecording = (0, _react.useCallback)(async () => {\n      try {\n        // Check permissions\n        if (permissionResponse?.status !== 'granted') {\n          console.log('Requesting microphone permission...');\n          const response = await requestPermission();\n          if (response.status !== 'granted') {\n            throw new Error('Microphone permission was denied');\n          }\n        }\n\n        // Set audio mode\n        const audioMode = {\n          allowsRecordingIOS: true,\n          playsInSilentModeIOS: true,\n          staysActiveInBackground: false\n        };\n\n        // Only add Android-specific settings on Android platform\n        if (Platform.default.OS === 'android' && _expoAv.Audio.AndroidAudioUsage) {\n          audioMode.interruptionModeAndroid = _expoAv.Audio.AndroidAudioUsage.VOICE_COMMUNICATION;\n        }\n        await _expoAv.Audio.setAudioModeAsync(audioMode);\n\n        // Start recording\n        const {\n          recording: newRecording\n        } = await _expoAv.Audio.Recording.createAsync(_expoAv.Audio.RecordingOptionsPresets.HIGH_QUALITY);\n        setRecording(newRecording);\n        setIsRecording(true);\n      } catch (error) {\n        console.error('Failed to start recording:', error);\n        throw error;\n      }\n    }, [permissionResponse, requestPermission]);\n    const stopRecording = (0, _react.useCallback)(async () => {\n      if (!recording) {\n        throw new Error('No active recording');\n      }\n      try {\n        await recording.stopAndUnloadAsync();\n        const uri = recording.getURI();\n        setRecording(null);\n        setIsRecording(false);\n        return uri;\n      } catch (error) {\n        console.error('Failed to stop recording:', error);\n        throw error;\n      }\n    }, [recording]);\n    const getAudioBlob = (0, _react.useCallback)(async uri => {\n      try {\n        if (Platform.default.OS === 'web') {\n          const response = await fetch(uri);\n          const blob = await response.blob();\n          return {\n            blob,\n            filename: 'audio.webm'\n          };\n        } else {\n          // For native platforms, read as base64 and convert to blob\n          const base64 = await FileSystem.readAsStringAsync(uri, {\n            encoding: FileSystem.EncodingType.Base64\n          });\n\n          // Convert base64 to blob\n          const response = await fetch(`data:audio/mp3;base64,${base64}`);\n          const blob = await response.blob();\n          return {\n            blob,\n            filename: 'audio.mp3'\n          };\n        }\n      } catch (error) {\n        console.error('Failed to get audio blob:', error);\n        throw error;\n      }\n    }, []);\n    return {\n      isRecording,\n      startRecording,\n      stopRecording,\n      getAudioBlob,\n      permissionStatus: permissionResponse?.status\n    };\n  }\n});","lineCount":131,"map":[[27,2,6,0,"exports"],[27,9,6,0],[27,10,6,0,"useAudioRecording"],[27,27,6,0],[27,30,6,0,"useAudioRecording"],[27,47,6,0],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_expoAv"],[29,13,2,0],[29,16,2,0,"require"],[29,23,2,0],[29,24,2,0,"_dependencyMap"],[29,38,2,0],[30,2,3,0],[30,6,3,0,"_expoFileSystem"],[30,21,3,0],[30,24,3,0,"require"],[30,31,3,0],[30,32,3,0,"_dependencyMap"],[30,46,3,0],[31,2,3,0],[31,6,3,0,"FileSystem"],[31,16,3,0],[31,19,3,0,"_interopNamespace"],[31,36,3,0],[31,37,3,0,"_expoFileSystem"],[31,52,3,0],[32,2,3,47],[32,6,3,47,"_reactNativeWebDistExportsPlatform"],[32,40,3,47],[32,43,3,47,"require"],[32,50,3,47],[32,51,3,47,"_dependencyMap"],[32,65,3,47],[33,2,3,47],[33,6,3,47,"Platform"],[33,14,3,47],[33,17,3,47,"_interopDefault"],[33,32,3,47],[33,33,3,47,"_reactNativeWebDistExportsPlatform"],[33,67,3,47],[34,2,6,7],[34,11,6,16,"useAudioRecording"],[34,28,6,33,"useAudioRecording"],[34,29,6,33],[34,31,6,36],[35,4,7,2],[35,10,7,8],[35,11,7,9,"recording"],[35,20,7,18],[35,22,7,20,"setRecording"],[35,34,7,32],[35,35,7,33],[35,38,7,36],[35,42,7,36,"useState"],[35,48,7,44],[35,49,7,44,"useState"],[35,57,7,44],[35,59,7,69],[35,63,7,73],[35,64,7,74],[36,4,8,2],[36,10,8,8],[36,11,8,9,"isRecording"],[36,22,8,20],[36,24,8,22,"setIsRecording"],[36,38,8,36],[36,39,8,37],[36,42,8,40],[36,46,8,40,"useState"],[36,52,8,48],[36,53,8,48,"useState"],[36,61,8,48],[36,63,8,49],[36,68,8,54],[36,69,8,55],[37,4,9,2],[37,10,9,8],[37,11,9,9,"permissionResponse"],[37,29,9,27],[37,31,9,29,"requestPermission"],[37,48,9,46],[37,49,9,47],[37,52,9,50,"Audio"],[37,59,9,55],[37,60,9,55,"Audio"],[37,65,9,55],[37,66,9,56,"usePermissions"],[37,80,9,70],[37,81,9,71],[37,82,9,72],[38,4,11,2],[38,8,11,2,"useEffect"],[38,14,11,11],[38,15,11,11,"useEffect"],[38,24,11,11],[38,26,11,12],[38,32,11,18],[39,6,12,4],[39,13,12,11],[39,19,12,17],[40,8,13,6],[40,12,13,10,"recording"],[40,21,13,19],[40,23,13,21],[41,10,14,8,"recording"],[41,19,14,17],[41,20,14,18,"stopAndUnloadAsync"],[41,38,14,36],[41,39,14,37],[41,40,14,38],[41,41,14,39,"catch"],[41,46,14,44],[41,47,14,45,"console"],[41,54,14,52],[41,55,14,53,"error"],[41,60,14,58],[41,61,14,59],[42,8,15,6],[43,6,16,4],[43,7,16,5],[44,4,17,2],[44,5,17,3],[44,7,17,5],[44,8,17,6,"recording"],[44,17,17,15],[44,18,17,16],[44,19,17,17],[45,4,19,2],[45,10,19,8,"startRecording"],[45,24,19,22],[45,27,19,25],[45,31,19,25,"useCallback"],[45,37,19,36],[45,38,19,36,"useCallback"],[45,49,19,36],[45,51,19,37],[45,63,19,49],[46,6,20,4],[46,10,20,8],[47,8,21,6],[48,8,22,6],[48,12,22,10,"permissionResponse"],[48,30,22,28],[48,32,22,30,"status"],[48,38,22,36],[48,43,22,41],[48,52,22,50],[48,54,22,52],[49,10,23,8,"console"],[49,17,23,15],[49,18,23,16,"log"],[49,21,23,19],[49,22,23,20],[49,59,23,57],[49,60,23,58],[50,10,24,8],[50,16,24,14,"response"],[50,24,24,22],[50,27,24,25],[50,33,24,31,"requestPermission"],[50,50,24,48],[50,51,24,49],[50,52,24,50],[51,10,25,8],[51,14,25,12,"response"],[51,22,25,20],[51,23,25,21,"status"],[51,29,25,27],[51,34,25,32],[51,43,25,41],[51,45,25,43],[52,12,26,10],[52,18,26,16],[52,22,26,20,"Error"],[52,27,26,25],[52,28,26,26],[52,62,26,60],[52,63,26,61],[53,10,27,8],[54,8,28,6],[56,8,30,6],[57,8,31,6],[57,14,31,12,"audioMode"],[57,23,31,26],[57,26,31,29],[58,10,32,8,"allowsRecordingIOS"],[58,28,32,26],[58,30,32,28],[58,34,32,32],[59,10,33,8,"playsInSilentModeIOS"],[59,30,33,28],[59,32,33,30],[59,36,33,34],[60,10,34,8,"staysActiveInBackground"],[60,33,34,31],[60,35,34,33],[61,8,35,6],[61,9,35,7],[63,8,37,6],[64,8,38,6],[64,12,38,10,"Platform"],[64,20,38,18],[64,21,38,18,"default"],[64,28,38,18],[64,29,38,19,"OS"],[64,31,38,21],[64,36,38,26],[64,45,38,35],[64,49,38,39,"Audio"],[64,56,38,44],[64,57,38,44,"Audio"],[64,62,38,44],[64,63,38,45,"AndroidAudioUsage"],[64,80,38,62],[64,82,38,64],[65,10,39,8,"audioMode"],[65,19,39,17],[65,20,39,18,"interruptionModeAndroid"],[65,43,39,41],[65,46,39,44,"Audio"],[65,53,39,49],[65,54,39,49,"Audio"],[65,59,39,49],[65,60,39,50,"AndroidAudioUsage"],[65,77,39,67],[65,78,39,68,"VOICE_COMMUNICATION"],[65,97,39,87],[66,8,40,6],[67,8,42,6],[67,14,42,12,"Audio"],[67,21,42,17],[67,22,42,17,"Audio"],[67,27,42,17],[67,28,42,18,"setAudioModeAsync"],[67,45,42,35],[67,46,42,36,"audioMode"],[67,55,42,45],[67,56,42,46],[69,8,44,6],[70,8,45,6],[70,14,45,12],[71,10,45,14,"recording"],[71,19,45,23],[71,21,45,25,"newRecording"],[72,8,45,38],[72,9,45,39],[72,12,45,42],[72,18,45,48,"Audio"],[72,25,45,53],[72,26,45,53,"Audio"],[72,31,45,53],[72,32,45,54,"Recording"],[72,41,45,63],[72,42,45,64,"createAsync"],[72,53,45,75],[72,54,46,8,"Audio"],[72,61,46,13],[72,62,46,13,"Audio"],[72,67,46,13],[72,68,46,14,"RecordingOptionsPresets"],[72,91,46,37],[72,92,46,38,"HIGH_QUALITY"],[72,104,47,6],[72,105,47,7],[73,8,49,6,"setRecording"],[73,20,49,18],[73,21,49,19,"newRecording"],[73,33,49,31],[73,34,49,32],[74,8,50,6,"setIsRecording"],[74,22,50,20],[74,23,50,21],[74,27,50,25],[74,28,50,26],[75,6,51,4],[75,7,51,5],[75,8,51,6],[75,15,51,13,"error"],[75,20,51,18],[75,22,51,20],[76,8,52,6,"console"],[76,15,52,13],[76,16,52,14,"error"],[76,21,52,19],[76,22,52,20],[76,50,52,48],[76,52,52,50,"error"],[76,57,52,55],[76,58,52,56],[77,8,53,6],[77,14,53,12,"error"],[77,19,53,17],[78,6,54,4],[79,4,55,2],[79,5,55,3],[79,7,55,5],[79,8,55,6,"permissionResponse"],[79,26,55,24],[79,28,55,26,"requestPermission"],[79,45,55,43],[79,46,55,44],[79,47,55,45],[80,4,57,2],[80,10,57,8,"stopRecording"],[80,23,57,21],[80,26,57,24],[80,30,57,24,"useCallback"],[80,36,57,35],[80,37,57,35,"useCallback"],[80,48,57,35],[80,50,57,36],[80,62,57,48],[81,6,58,4],[81,10,58,8],[81,11,58,9,"recording"],[81,20,58,18],[81,22,58,20],[82,8,59,6],[82,14,59,12],[82,18,59,16,"Error"],[82,23,59,21],[82,24,59,22],[82,45,59,43],[82,46,59,44],[83,6,60,4],[84,6,62,4],[84,10,62,8],[85,8,63,6],[85,14,63,12,"recording"],[85,23,63,21],[85,24,63,22,"stopAndUnloadAsync"],[85,42,63,40],[85,43,63,41],[85,44,63,42],[86,8,64,6],[86,14,64,12,"uri"],[86,17,64,15],[86,20,64,18,"recording"],[86,29,64,27],[86,30,64,28,"getURI"],[86,36,64,34],[86,37,64,35],[86,38,64,36],[87,8,66,6,"setRecording"],[87,20,66,18],[87,21,66,19],[87,25,66,23],[87,26,66,24],[88,8,67,6,"setIsRecording"],[88,22,67,20],[88,23,67,21],[88,28,67,26],[88,29,67,27],[89,8,69,6],[89,15,69,13,"uri"],[89,18,69,16],[90,6,70,4],[90,7,70,5],[90,8,70,6],[90,15,70,13,"error"],[90,20,70,18],[90,22,70,20],[91,8,71,6,"console"],[91,15,71,13],[91,16,71,14,"error"],[91,21,71,19],[91,22,71,20],[91,49,71,47],[91,51,71,49,"error"],[91,56,71,54],[91,57,71,55],[92,8,72,6],[92,14,72,12,"error"],[92,19,72,17],[93,6,73,4],[94,4,74,2],[94,5,74,3],[94,7,74,5],[94,8,74,6,"recording"],[94,17,74,15],[94,18,74,16],[94,19,74,17],[95,4,76,2],[95,10,76,8,"getAudioBlob"],[95,22,76,20],[95,25,76,23],[95,29,76,23,"useCallback"],[95,35,76,34],[95,36,76,34,"useCallback"],[95,47,76,34],[95,49,76,35],[95,55,76,42,"uri"],[95,58,76,53],[95,62,76,101],[96,6,77,4],[96,10,77,8],[97,8,78,6],[97,12,78,10,"Platform"],[97,20,78,18],[97,21,78,18,"default"],[97,28,78,18],[97,29,78,19,"OS"],[97,31,78,21],[97,36,78,26],[97,41,78,31],[97,43,78,33],[98,10,79,8],[98,16,79,14,"response"],[98,24,79,22],[98,27,79,25],[98,33,79,31,"fetch"],[98,38,79,36],[98,39,79,37,"uri"],[98,42,79,40],[98,43,79,41],[99,10,80,8],[99,16,80,14,"blob"],[99,20,80,18],[99,23,80,21],[99,29,80,27,"response"],[99,37,80,35],[99,38,80,36,"blob"],[99,42,80,40],[99,43,80,41],[99,44,80,42],[100,10,81,8],[100,17,81,15],[101,12,81,17,"blob"],[101,16,81,21],[102,12,81,23,"filename"],[102,20,81,31],[102,22,81,33],[103,10,81,46],[103,11,81,47],[104,8,82,6],[104,9,82,7],[104,15,82,13],[105,10,83,8],[106,10,84,8],[106,16,84,14,"base64"],[106,22,84,20],[106,25,84,23],[106,31,84,29,"FileSystem"],[106,41,84,39],[106,42,84,40,"readAsStringAsync"],[106,59,84,57],[106,60,84,58,"uri"],[106,63,84,61],[106,65,84,63],[107,12,85,10,"encoding"],[107,20,85,18],[107,22,85,20,"FileSystem"],[107,32,85,30],[107,33,85,31,"EncodingType"],[107,45,85,43],[107,46,85,44,"Base64"],[108,10,86,8],[108,11,86,9],[108,12,86,10],[110,10,88,8],[111,10,89,8],[111,16,89,14,"response"],[111,24,89,22],[111,27,89,25],[111,33,89,31,"fetch"],[111,38,89,36],[111,39,89,37],[111,64,89,62,"base64"],[111,70,89,68],[111,72,89,70],[111,73,89,71],[112,10,90,8],[112,16,90,14,"blob"],[112,20,90,18],[112,23,90,21],[112,29,90,27,"response"],[112,37,90,35],[112,38,90,36,"blob"],[112,42,90,40],[112,43,90,41],[112,44,90,42],[113,10,92,8],[113,17,92,15],[114,12,92,17,"blob"],[114,16,92,21],[115,12,92,23,"filename"],[115,20,92,31],[115,22,92,33],[116,10,92,45],[116,11,92,46],[117,8,93,6],[118,6,94,4],[118,7,94,5],[118,8,94,6],[118,15,94,13,"error"],[118,20,94,18],[118,22,94,20],[119,8,95,6,"console"],[119,15,95,13],[119,16,95,14,"error"],[119,21,95,19],[119,22,95,20],[119,49,95,47],[119,51,95,49,"error"],[119,56,95,54],[119,57,95,55],[120,8,96,6],[120,14,96,12,"error"],[120,19,96,17],[121,6,97,4],[122,4,98,2],[122,5,98,3],[122,7,98,5],[122,9,98,7],[122,10,98,8],[123,4,100,2],[123,11,100,9],[124,6,101,4,"isRecording"],[124,17,101,15],[125,6,102,4,"startRecording"],[125,20,102,18],[126,6,103,4,"stopRecording"],[126,19,103,17],[127,6,104,4,"getAudioBlob"],[127,18,104,16],[128,6,105,4,"permissionStatus"],[128,22,105,20],[128,24,105,22,"permissionResponse"],[128,42,105,40],[128,44,105,42,"status"],[129,4,106,2],[129,5,106,3],[130,2,107,0],[131,0,107,1],[131,3]],"functionMap":{"names":["<global>","useAudioRecording","useEffect$argument_0","<anonymous>","startRecording","stopRecording","getAudioBlob"],"mappings":"AAA;OCK;YCK;WCC;KDI;GDC;qCGE;GHoC;oCIE;GJiB;mCKE;GLsB;CDS"},"hasCjsExports":false},"type":"js/module"}]}