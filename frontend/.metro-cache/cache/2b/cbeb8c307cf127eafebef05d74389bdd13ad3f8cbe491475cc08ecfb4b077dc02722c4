{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-av","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":32,"index":90}}],"key":"VxVG0TWBdB+Oc1qOQ32HKtN+H5M=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":91},"end":{"line":3,"column":47,"index":138}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useAudioRecording = useAudioRecording;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoAv = require(_dependencyMap[1], \"expo-av\");\n  var _expoFileSystem = require(_dependencyMap[2], \"expo-file-system\");\n  var FileSystem = _interopNamespace(_expoFileSystem);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  function useAudioRecording() {\n    const [recording, setRecording] = (0, _react.useState)(null);\n    const [isRecording, setIsRecording] = (0, _react.useState)(false);\n    const [permissionResponse, requestPermission] = _expoAv.Audio.usePermissions();\n    (0, _react.useEffect)(() => {\n      return () => {\n        if (recording) {\n          recording.stopAndUnloadAsync().catch(console.error);\n        }\n      };\n    }, [recording]);\n    const startRecording = (0, _react.useCallback)(async () => {\n      try {\n        // Check permissions\n        if (permissionResponse?.status !== 'granted') {\n          console.log('Requesting microphone permission...');\n          const response = await requestPermission();\n          if (response.status !== 'granted') {\n            throw new Error('Microphone permission was denied');\n          }\n        }\n\n        // Set audio mode\n        await _expoAv.Audio.setAudioModeAsync({\n          allowsRecordingIOS: true,\n          playsInSilentModeIOS: true,\n          staysActiveInBackground: false,\n          interruptionModeAndroid: _expoAv.Audio.AndroidAudioUsage.VOICE_COMMUNICATION\n        });\n\n        // Start recording\n        const {\n          recording: newRecording\n        } = await _expoAv.Audio.Recording.createAsync(_expoAv.Audio.RecordingOptionsPresets.HIGH_QUALITY);\n        setRecording(newRecording);\n        setIsRecording(true);\n      } catch (error) {\n        console.error('Failed to start recording:', error);\n        throw error;\n      }\n    }, [permissionResponse, requestPermission]);\n    const stopRecording = (0, _react.useCallback)(async () => {\n      if (!recording) {\n        throw new Error('No active recording');\n      }\n      try {\n        await recording.stopAndUnloadAsync();\n        const uri = recording.getURI();\n        setRecording(null);\n        setIsRecording(false);\n        return uri;\n      } catch (error) {\n        console.error('Failed to stop recording:', error);\n        throw error;\n      }\n    }, [recording]);\n    const getAudioBlob = (0, _react.useCallback)(async uri => {\n      try {\n        if (Platform.default.OS === 'web') {\n          const response = await fetch(uri);\n          const blob = await response.blob();\n          return {\n            blob,\n            filename: 'audio.webm'\n          };\n        } else {\n          // For native platforms, read as base64 and convert to blob\n          const base64 = await FileSystem.readAsStringAsync(uri, {\n            encoding: FileSystem.EncodingType.Base64\n          });\n\n          // Convert base64 to blob\n          const response = await fetch(`data:audio/mp3;base64,${base64}`);\n          const blob = await response.blob();\n          return {\n            blob,\n            filename: 'audio.mp3'\n          };\n        }\n      } catch (error) {\n        console.error('Failed to get audio blob:', error);\n        throw error;\n      }\n    }, []);\n    return {\n      isRecording,\n      startRecording,\n      stopRecording,\n      getAudioBlob,\n      permissionStatus: permissionResponse?.status\n    };\n  }\n});","lineCount":126,"map":[[27,2,6,0,"exports"],[27,9,6,0],[27,10,6,0,"useAudioRecording"],[27,27,6,0],[27,30,6,0,"useAudioRecording"],[27,47,6,0],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_expoAv"],[29,13,2,0],[29,16,2,0,"require"],[29,23,2,0],[29,24,2,0,"_dependencyMap"],[29,38,2,0],[30,2,3,0],[30,6,3,0,"_expoFileSystem"],[30,21,3,0],[30,24,3,0,"require"],[30,31,3,0],[30,32,3,0,"_dependencyMap"],[30,46,3,0],[31,2,3,0],[31,6,3,0,"FileSystem"],[31,16,3,0],[31,19,3,0,"_interopNamespace"],[31,36,3,0],[31,37,3,0,"_expoFileSystem"],[31,52,3,0],[32,2,3,47],[32,6,3,47,"_reactNativeWebDistExportsPlatform"],[32,40,3,47],[32,43,3,47,"require"],[32,50,3,47],[32,51,3,47,"_dependencyMap"],[32,65,3,47],[33,2,3,47],[33,6,3,47,"Platform"],[33,14,3,47],[33,17,3,47,"_interopDefault"],[33,32,3,47],[33,33,3,47,"_reactNativeWebDistExportsPlatform"],[33,67,3,47],[34,2,6,7],[34,11,6,16,"useAudioRecording"],[34,28,6,33,"useAudioRecording"],[34,29,6,33],[34,31,6,36],[35,4,7,2],[35,10,7,8],[35,11,7,9,"recording"],[35,20,7,18],[35,22,7,20,"setRecording"],[35,34,7,32],[35,35,7,33],[35,38,7,36],[35,42,7,36,"useState"],[35,48,7,44],[35,49,7,44,"useState"],[35,57,7,44],[35,59,7,69],[35,63,7,73],[35,64,7,74],[36,4,8,2],[36,10,8,8],[36,11,8,9,"isRecording"],[36,22,8,20],[36,24,8,22,"setIsRecording"],[36,38,8,36],[36,39,8,37],[36,42,8,40],[36,46,8,40,"useState"],[36,52,8,48],[36,53,8,48,"useState"],[36,61,8,48],[36,63,8,49],[36,68,8,54],[36,69,8,55],[37,4,9,2],[37,10,9,8],[37,11,9,9,"permissionResponse"],[37,29,9,27],[37,31,9,29,"requestPermission"],[37,48,9,46],[37,49,9,47],[37,52,9,50,"Audio"],[37,59,9,55],[37,60,9,55,"Audio"],[37,65,9,55],[37,66,9,56,"usePermissions"],[37,80,9,70],[37,81,9,71],[37,82,9,72],[38,4,11,2],[38,8,11,2,"useEffect"],[38,14,11,11],[38,15,11,11,"useEffect"],[38,24,11,11],[38,26,11,12],[38,32,11,18],[39,6,12,4],[39,13,12,11],[39,19,12,17],[40,8,13,6],[40,12,13,10,"recording"],[40,21,13,19],[40,23,13,21],[41,10,14,8,"recording"],[41,19,14,17],[41,20,14,18,"stopAndUnloadAsync"],[41,38,14,36],[41,39,14,37],[41,40,14,38],[41,41,14,39,"catch"],[41,46,14,44],[41,47,14,45,"console"],[41,54,14,52],[41,55,14,53,"error"],[41,60,14,58],[41,61,14,59],[42,8,15,6],[43,6,16,4],[43,7,16,5],[44,4,17,2],[44,5,17,3],[44,7,17,5],[44,8,17,6,"recording"],[44,17,17,15],[44,18,17,16],[44,19,17,17],[45,4,19,2],[45,10,19,8,"startRecording"],[45,24,19,22],[45,27,19,25],[45,31,19,25,"useCallback"],[45,37,19,36],[45,38,19,36,"useCallback"],[45,49,19,36],[45,51,19,37],[45,63,19,49],[46,6,20,4],[46,10,20,8],[47,8,21,6],[48,8,22,6],[48,12,22,10,"permissionResponse"],[48,30,22,28],[48,32,22,30,"status"],[48,38,22,36],[48,43,22,41],[48,52,22,50],[48,54,22,52],[49,10,23,8,"console"],[49,17,23,15],[49,18,23,16,"log"],[49,21,23,19],[49,22,23,20],[49,59,23,57],[49,60,23,58],[50,10,24,8],[50,16,24,14,"response"],[50,24,24,22],[50,27,24,25],[50,33,24,31,"requestPermission"],[50,50,24,48],[50,51,24,49],[50,52,24,50],[51,10,25,8],[51,14,25,12,"response"],[51,22,25,20],[51,23,25,21,"status"],[51,29,25,27],[51,34,25,32],[51,43,25,41],[51,45,25,43],[52,12,26,10],[52,18,26,16],[52,22,26,20,"Error"],[52,27,26,25],[52,28,26,26],[52,62,26,60],[52,63,26,61],[53,10,27,8],[54,8,28,6],[56,8,30,6],[57,8,31,6],[57,14,31,12,"Audio"],[57,21,31,17],[57,22,31,17,"Audio"],[57,27,31,17],[57,28,31,18,"setAudioModeAsync"],[57,45,31,35],[57,46,31,36],[58,10,32,8,"allowsRecordingIOS"],[58,28,32,26],[58,30,32,28],[58,34,32,32],[59,10,33,8,"playsInSilentModeIOS"],[59,30,33,28],[59,32,33,30],[59,36,33,34],[60,10,34,8,"staysActiveInBackground"],[60,33,34,31],[60,35,34,33],[60,40,34,38],[61,10,35,8,"interruptionModeAndroid"],[61,33,35,31],[61,35,35,33,"Audio"],[61,42,35,38],[61,43,35,38,"Audio"],[61,48,35,38],[61,49,35,39,"AndroidAudioUsage"],[61,66,35,56],[61,67,35,57,"VOICE_COMMUNICATION"],[62,8,36,6],[62,9,36,7],[62,10,36,8],[64,8,38,6],[65,8,39,6],[65,14,39,12],[66,10,39,14,"recording"],[66,19,39,23],[66,21,39,25,"newRecording"],[67,8,39,38],[67,9,39,39],[67,12,39,42],[67,18,39,48,"Audio"],[67,25,39,53],[67,26,39,53,"Audio"],[67,31,39,53],[67,32,39,54,"Recording"],[67,41,39,63],[67,42,39,64,"createAsync"],[67,53,39,75],[67,54,40,8,"Audio"],[67,61,40,13],[67,62,40,13,"Audio"],[67,67,40,13],[67,68,40,14,"RecordingOptionsPresets"],[67,91,40,37],[67,92,40,38,"HIGH_QUALITY"],[67,104,41,6],[67,105,41,7],[68,8,43,6,"setRecording"],[68,20,43,18],[68,21,43,19,"newRecording"],[68,33,43,31],[68,34,43,32],[69,8,44,6,"setIsRecording"],[69,22,44,20],[69,23,44,21],[69,27,44,25],[69,28,44,26],[70,6,45,4],[70,7,45,5],[70,8,45,6],[70,15,45,13,"error"],[70,20,45,18],[70,22,45,20],[71,8,46,6,"console"],[71,15,46,13],[71,16,46,14,"error"],[71,21,46,19],[71,22,46,20],[71,50,46,48],[71,52,46,50,"error"],[71,57,46,55],[71,58,46,56],[72,8,47,6],[72,14,47,12,"error"],[72,19,47,17],[73,6,48,4],[74,4,49,2],[74,5,49,3],[74,7,49,5],[74,8,49,6,"permissionResponse"],[74,26,49,24],[74,28,49,26,"requestPermission"],[74,45,49,43],[74,46,49,44],[74,47,49,45],[75,4,51,2],[75,10,51,8,"stopRecording"],[75,23,51,21],[75,26,51,24],[75,30,51,24,"useCallback"],[75,36,51,35],[75,37,51,35,"useCallback"],[75,48,51,35],[75,50,51,36],[75,62,51,48],[76,6,52,4],[76,10,52,8],[76,11,52,9,"recording"],[76,20,52,18],[76,22,52,20],[77,8,53,6],[77,14,53,12],[77,18,53,16,"Error"],[77,23,53,21],[77,24,53,22],[77,45,53,43],[77,46,53,44],[78,6,54,4],[79,6,56,4],[79,10,56,8],[80,8,57,6],[80,14,57,12,"recording"],[80,23,57,21],[80,24,57,22,"stopAndUnloadAsync"],[80,42,57,40],[80,43,57,41],[80,44,57,42],[81,8,58,6],[81,14,58,12,"uri"],[81,17,58,15],[81,20,58,18,"recording"],[81,29,58,27],[81,30,58,28,"getURI"],[81,36,58,34],[81,37,58,35],[81,38,58,36],[82,8,60,6,"setRecording"],[82,20,60,18],[82,21,60,19],[82,25,60,23],[82,26,60,24],[83,8,61,6,"setIsRecording"],[83,22,61,20],[83,23,61,21],[83,28,61,26],[83,29,61,27],[84,8,63,6],[84,15,63,13,"uri"],[84,18,63,16],[85,6,64,4],[85,7,64,5],[85,8,64,6],[85,15,64,13,"error"],[85,20,64,18],[85,22,64,20],[86,8,65,6,"console"],[86,15,65,13],[86,16,65,14,"error"],[86,21,65,19],[86,22,65,20],[86,49,65,47],[86,51,65,49,"error"],[86,56,65,54],[86,57,65,55],[87,8,66,6],[87,14,66,12,"error"],[87,19,66,17],[88,6,67,4],[89,4,68,2],[89,5,68,3],[89,7,68,5],[89,8,68,6,"recording"],[89,17,68,15],[89,18,68,16],[89,19,68,17],[90,4,70,2],[90,10,70,8,"getAudioBlob"],[90,22,70,20],[90,25,70,23],[90,29,70,23,"useCallback"],[90,35,70,34],[90,36,70,34,"useCallback"],[90,47,70,34],[90,49,70,35],[90,55,70,42,"uri"],[90,58,70,53],[90,62,70,101],[91,6,71,4],[91,10,71,8],[92,8,72,6],[92,12,72,10,"Platform"],[92,20,72,18],[92,21,72,18,"default"],[92,28,72,18],[92,29,72,19,"OS"],[92,31,72,21],[92,36,72,26],[92,41,72,31],[92,43,72,33],[93,10,73,8],[93,16,73,14,"response"],[93,24,73,22],[93,27,73,25],[93,33,73,31,"fetch"],[93,38,73,36],[93,39,73,37,"uri"],[93,42,73,40],[93,43,73,41],[94,10,74,8],[94,16,74,14,"blob"],[94,20,74,18],[94,23,74,21],[94,29,74,27,"response"],[94,37,74,35],[94,38,74,36,"blob"],[94,42,74,40],[94,43,74,41],[94,44,74,42],[95,10,75,8],[95,17,75,15],[96,12,75,17,"blob"],[96,16,75,21],[97,12,75,23,"filename"],[97,20,75,31],[97,22,75,33],[98,10,75,46],[98,11,75,47],[99,8,76,6],[99,9,76,7],[99,15,76,13],[100,10,77,8],[101,10,78,8],[101,16,78,14,"base64"],[101,22,78,20],[101,25,78,23],[101,31,78,29,"FileSystem"],[101,41,78,39],[101,42,78,40,"readAsStringAsync"],[101,59,78,57],[101,60,78,58,"uri"],[101,63,78,61],[101,65,78,63],[102,12,79,10,"encoding"],[102,20,79,18],[102,22,79,20,"FileSystem"],[102,32,79,30],[102,33,79,31,"EncodingType"],[102,45,79,43],[102,46,79,44,"Base64"],[103,10,80,8],[103,11,80,9],[103,12,80,10],[105,10,82,8],[106,10,83,8],[106,16,83,14,"response"],[106,24,83,22],[106,27,83,25],[106,33,83,31,"fetch"],[106,38,83,36],[106,39,83,37],[106,64,83,62,"base64"],[106,70,83,68],[106,72,83,70],[106,73,83,71],[107,10,84,8],[107,16,84,14,"blob"],[107,20,84,18],[107,23,84,21],[107,29,84,27,"response"],[107,37,84,35],[107,38,84,36,"blob"],[107,42,84,40],[107,43,84,41],[107,44,84,42],[108,10,86,8],[108,17,86,15],[109,12,86,17,"blob"],[109,16,86,21],[110,12,86,23,"filename"],[110,20,86,31],[110,22,86,33],[111,10,86,45],[111,11,86,46],[112,8,87,6],[113,6,88,4],[113,7,88,5],[113,8,88,6],[113,15,88,13,"error"],[113,20,88,18],[113,22,88,20],[114,8,89,6,"console"],[114,15,89,13],[114,16,89,14,"error"],[114,21,89,19],[114,22,89,20],[114,49,89,47],[114,51,89,49,"error"],[114,56,89,54],[114,57,89,55],[115,8,90,6],[115,14,90,12,"error"],[115,19,90,17],[116,6,91,4],[117,4,92,2],[117,5,92,3],[117,7,92,5],[117,9,92,7],[117,10,92,8],[118,4,94,2],[118,11,94,9],[119,6,95,4,"isRecording"],[119,17,95,15],[120,6,96,4,"startRecording"],[120,20,96,18],[121,6,97,4,"stopRecording"],[121,19,97,17],[122,6,98,4,"getAudioBlob"],[122,18,98,16],[123,6,99,4,"permissionStatus"],[123,22,99,20],[123,24,99,22,"permissionResponse"],[123,42,99,40],[123,44,99,42,"status"],[124,4,100,2],[124,5,100,3],[125,2,101,0],[126,0,101,1],[126,3]],"functionMap":{"names":["<global>","useAudioRecording","useEffect$argument_0","<anonymous>","startRecording","stopRecording","getAudioBlob"],"mappings":"AAA;OCK;YCK;WCC;KDI;GDC;qCGE;GH8B;oCIE;GJiB;mCKE;GLsB;CDS"},"hasCjsExports":false},"type":"js/module"}]}