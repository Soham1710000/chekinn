{"dependencies":[{"name":"../../native/config/PlatformHelper","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"VAeUL6D5iY8QXYEBY5o7Ew2wCF4=","exportNames":["*"],"imports":1}},{"name":"./ConsecutiveNumbers","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":58,"index":127}}],"key":"b+ekfNlQYWowRogjJ1zD6mvkT+k=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,_i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,\"RVEngagedIndicesTrackerImpl\",{enumerable:!0,get:function(){return s}});var t=r(d[0],\"../../native/config/PlatformHelper\"),i=r(d[1],\"./ConsecutiveNumbers\");class s{constructor(){this.scrollOffset=0,this.drawDistance=t.PlatformConfig.defaultDrawDistance,this.enableOffsetProjection=!0,this.averageRenderTime=16,this.forceDisableOffsetProjection=!1,this.engagedIndices=i.ConsecutiveNumbers.EMPTY,this.smallMultiplier=.3,this.largeMultiplier=.7,this.velocityHistory=[0,0,0,-.1,-.1],this.velocityIndex=0}updateScrollOffset(t,i,s){this.scrollOffset=t;const o=s.getWindowsSize(),l=s.isHorizontal();i&&this.updateVelocityHistory(l?i.x:i.y);const c=this.isScrollingBackward(),n=this.enableOffsetProjection&&!this.forceDisableOffsetProjection?this.getProjectedScrollOffset(t,this.averageRenderTime):t,h=n+(l?o.width:o.height),y=2*this.drawDistance,f=c?this.largeMultiplier:this.smallMultiplier,u=c?this.smallMultiplier:this.largeMultiplier,v=Math.ceil(y*f),M=Math.ceil(y*u);let H=Math.max(0,n-v);let p=h+M+Math.max(0,v-n);const w=s.getLayoutSize(),I=l?w.width:w.height;if(p>I){const t=p-I;p=I,H=Math.max(0,H-t)}const b=s.getVisibleLayouts(H,p),O=this.engagedIndices;return this.engagedIndices=b,b.equals(O)?void 0:b}updateVelocityHistory(t){this.velocityHistory[this.velocityIndex]=t,this.velocityIndex=(this.velocityIndex+1)%this.velocityHistory.length}isScrollingBackward(){let t=0,i=0;for(let s=0;s<this.velocityHistory.length;s++)this.velocityHistory[s]>0?t++:this.velocityHistory[s]<0&&i++;return t<i}getMedianVelocity(){const t=[...this.velocityHistory].sort((t,i)=>t-i),i=t.length;if(i%2==1)return t[Math.floor(i/2)];const s=i/2;return(t[s-1]+t[s])/2}getProjectedScrollOffset(t,i){return t+this.getMedianVelocity()*i}computeVisibleIndices(t){const i=t.getWindowsSize(),s=t.isHorizontal(),o=this.scrollOffset,l=o+(s?i.width:i.height);return t.getVisibleLayouts(o,l)}getEngagedIndices(){return this.engagedIndices}setScrollDirection(t){\"forward\"===t?(this.velocityHistory=[0,0,0,.1,.1],this.velocityIndex=0):(this.velocityHistory=[0,0,0,-.1,-.1],this.velocityIndex=0)}resetVelocityHistory(){this.isScrollingBackward()?this.setScrollDirection(\"backward\"):this.setScrollDirection(\"forward\")}}});","lineCount":1,"map":[[1,91,3,0,"Object"],[1,98,3,0,"defineProperty"],[1,113,3,0,"e"],[1,115,3,0],[1,146,3,0,"enumerable"],[1,158,3,0],[1,160,3,0,"get"],[1,164,3,0],[1,182,3,0,"RVEngagedIndicesTrackerImpl"],[1,183,3,0],[1,187,1,0],[1,191,1,0,"_nativeConfigPlatformHelper"],[1,193,1,0,"r"],[1,195,1,0,"d"],[1,197,1,0],[1,238,2,0,"_ConsecutiveNumbers"],[1,240,2,0,"r"],[1,242,2,0,"d"],[1,244,2,0],[1,271,3,7],[1,277,3,13,"RVEngagedIndicesTrackerImpl"],[1,279,4,4,"constructor"],[1,293,6,8,"this"],[1,298,6,13,"scrollOffset"],[1,311,6,28],[1,313,8,8,"this"],[1,318,8,13,"drawDistance"],[1,331,8,28,"PlatformConfig"],[1,333,8,42,"PlatformConfig"],[1,348,8,43,"defaultDrawDistance"],[1,368,10,8,"this"],[1,373,10,13,"enableOffsetProjection"],[1,397,10,38],[1,399,12,8,"this"],[1,404,12,13,"averageRenderTime"],[1,422,12,33],[1,425,14,8,"this"],[1,430,14,13,"forceDisableOffsetProjection"],[1,460,14,44],[1,462,16,8,"this"],[1,467,16,13,"engagedIndices"],[1,482,16,30,"ConsecutiveNumbers"],[1,484,16,48,"ConsecutiveNumbers"],[1,503,16,49,"EMPTY"],[1,509,18,8,"this"],[1,514,18,13,"smallMultiplier"],[1,530,18,31],[1,533,19,8,"this"],[1,538,19,13,"largeMultiplier"],[1,554,19,31],[1,557,21,8,"this"],[1,562,21,13,"velocityHistory"],[1,578,21,31],[1,579,21,32],[1,581,21,35],[1,583,21,38],[1,586,21,42],[1,590,21,48],[1,594,22,8,"this"],[1,599,22,13,"velocityIndex"],[1,613,22,29],[1,614,23,4],[1,615,32,4,"updateScrollOffset"],[1,634,32,23,"offset"],[1,636,32,31,"velocity"],[1,638,32,41,"layoutManager"],[1,641,34,8,"this"],[1,646,34,13,"scrollOffset"],[1,659,34,28,"offset"],[1,661,36,8],[1,667,36,14,"windowSize"],[1,669,36,27,"layoutManager"],[1,671,36,41,"getWindowsSize"],[1,688,37,14,"isHorizontal"],[1,690,37,29,"layoutManager"],[1,692,37,43,"isHorizontal"],[1,707,39,12,"velocity"],[1,710,40,12,"this"],[1,715,40,17,"updateVelocityHistory"],[1,737,40,39,"isHorizontal"],[1,739,40,54,"velocity"],[1,741,40,63,"x"],[1,743,40,67,"velocity"],[1,745,40,76,"y"],[1,748,43,8],[1,754,43,14,"isScrollingBackward"],[1,756,43,36,"this"],[1,761,43,41,"isScrollingBackward"],[1,783,44,14,"viewportStart"],[1,785,44,30,"this"],[1,790,44,35,"enableOffsetProjection"],[1,815,44,62,"this"],[1,820,44,67,"forceDisableOffsetProjection"],[1,849,45,14,"this"],[1,854,45,19,"getProjectedScrollOffset"],[1,879,45,44,"offset"],[1,881,45,52,"this"],[1,886,45,57,"averageRenderTime"],[1,905,46,14,"offset"],[1,907,49,14,"viewportEnd"],[1,909,49,28,"viewportStart"],[1,912,48,29,"isHorizontal"],[1,914,48,44,"windowSize"],[1,916,48,55,"width"],[1,922,48,63,"windowSize"],[1,924,48,74,"height"],[1,932,52,14,"totalBuffer"],[1,934,52,48],[1,936,52,28,"this"],[1,941,52,33,"drawDistance"],[1,954,56,14,"beforeRatio"],[1,956,56,28,"isScrollingBackward"],[1,958,57,14,"this"],[1,963,57,19,"largeMultiplier"],[1,979,58,14,"this"],[1,984,58,19,"smallMultiplier"],[1,1000,59,14,"afterRatio"],[1,1002,59,27,"isScrollingBackward"],[1,1004,60,14,"this"],[1,1009,60,19,"smallMultiplier"],[1,1025,61,14,"this"],[1,1030,61,19,"largeMultiplier"],[1,1046,62,14,"bufferBefore"],[1,1048,62,29,"Math"],[1,1053,62,34,"ceil"],[1,1058,62,39,"totalBuffer"],[1,1060,62,53,"beforeRatio"],[1,1063,63,14,"bufferAfter"],[1,1065,63,28,"Math"],[1,1070,63,33,"ceil"],[1,1075,63,38,"totalBuffer"],[1,1077,63,52,"afterRatio"],[1,1080,66,8],[1,1084,66,12,"extendedStart"],[1,1086,66,28,"Math"],[1,1091,66,33,"max"],[1,1095,66,37],[1,1097,66,40,"viewportStart"],[1,1099,66,56,"bufferBefore"],[1,1102,70,8],[1,1106,70,12,"extendedEnd"],[1,1108,70,26,"viewportEnd"],[1,1110,70,40,"bufferAfter"],[1,1112,68,34,"Math"],[1,1117,68,39,"max"],[1,1121,68,43],[1,1123,68,46,"bufferBefore"],[1,1125,68,61,"viewportStart"],[1,1128,73,8],[1,1134,73,14,"layoutSize"],[1,1136,73,27,"layoutManager"],[1,1138,73,41,"getLayoutSize"],[1,1154,74,14,"maxPosition"],[1,1156,74,28,"isHorizontal"],[1,1158,74,43,"layoutSize"],[1,1160,74,54,"width"],[1,1166,74,62,"layoutSize"],[1,1168,74,73,"height"],[1,1175,76,8],[1,1178,76,12,"extendedEnd"],[1,1180,76,26,"maxPosition"],[1,1182,76,39],[1,1183,78,12],[1,1189,78,18,"unusedEndBuffer"],[1,1191,78,36,"extendedEnd"],[1,1193,78,50,"maxPosition"],[1,1195,79,12,"extendedEnd"],[1,1197,79,26,"maxPosition"],[1,1199,81,12,"extendedStart"],[1,1201,81,28,"Math"],[1,1206,81,33,"max"],[1,1210,81,37],[1,1212,81,40,"extendedStart"],[1,1214,81,56,"unusedEndBuffer"],[1,1216,82,8],[1,1217,84,8],[1,1223,84,14,"newEngagedIndices"],[1,1225,84,34,"layoutManager"],[1,1227,84,48,"getVisibleLayouts"],[1,1245,84,66,"extendedStart"],[1,1247,84,81,"extendedEnd"],[1,1250,92,14,"oldEngagedIndices"],[1,1252,92,34,"this"],[1,1257,92,39,"engagedIndices"],[1,1272,94,8],[1,1279,93,8,"this"],[1,1284,93,13,"engagedIndices"],[1,1299,93,30,"newEngagedIndices"],[1,1301,94,15,"newEngagedIndices"],[1,1303,94,33,"equals"],[1,1310,94,40,"oldEngagedIndices"],[1,1318,95,14,"undefined"],[1,1320,96,14,"newEngagedIndices"],[1,1321,97,4],[1,1322,102,4,"updateVelocityHistory"],[1,1344,102,26,"velocity"],[1,1347,103,8,"this"],[1,1352,103,13,"velocityHistory"],[1,1368,103,29,"this"],[1,1373,103,34,"velocityIndex"],[1,1388,103,51,"velocity"],[1,1390,104,8,"this"],[1,1395,104,13,"velocityIndex"],[1,1410,104,30,"this"],[1,1415,104,35,"velocityIndex"],[1,1429,104,51],[1,1432,104,56,"this"],[1,1437,104,61,"velocityHistory"],[1,1453,104,77,"length"],[1,1459,105,4],[1,1460,111,4,"isScrollingBackward"],[1,1482,113,8],[1,1486,113,12,"positiveCount"],[1,1488,113,28],[1,1490,114,12,"negativeCount"],[1,1492,114,28],[1,1494,116,8],[1,1498,116,13],[1,1502,116,17,"i"],[1,1504,116,21],[1,1506,116,24,"i"],[1,1508,116,28,"this"],[1,1513,116,33,"velocityHistory"],[1,1529,116,49,"length"],[1,1536,116,57,"i"],[1,1540,117,16,"this"],[1,1545,117,21,"velocityHistory"],[1,1561,117,37,"i"],[1,1564,117,42],[1,1566,118,16,"positiveCount"],[1,1570,120,21,"this"],[1,1575,120,26,"velocityHistory"],[1,1591,120,42,"i"],[1,1594,120,47],[1,1597,121,16,"negativeCount"],[1,1601,124,8],[1,1608,124,15,"positiveCount"],[1,1610,124,31,"negativeCount"],[1,1611,125,4],[1,1612,131,4,"getMedianVelocity"],[1,1632,133,8],[1,1638,133,14,"sortedVelocities"],[1,1640,133,33],[1,1644,133,37,"this"],[1,1649,133,42,"velocityHistory"],[1,1666,133,59,"sort"],[1,1671,133,64],[1,1672,133,65,"valueA"],[1,1674,133,73,"valueB"],[1,1678,133,84,"valueA"],[1,1680,133,93,"valueB"],[1,1683,134,14,"length"],[1,1685,134,23,"sortedVelocities"],[1,1687,134,40,"length"],[1,1694,136,8],[1,1697,136,12,"length"],[1,1699,136,21],[1,1702,136,27],[1,1704,137,12],[1,1711,137,19,"sortedVelocities"],[1,1713,137,36,"Math"],[1,1718,137,41,"floor"],[1,1724,137,47,"length"],[1,1726,137,56],[1,1730,140,8],[1,1736,140,14,"midIndex"],[1,1738,140,25,"length"],[1,1740,140,34],[1,1742,141,8],[1,1749,141,16,"sortedVelocities"],[1,1751,141,33,"midIndex"],[1,1753,141,44],[1,1756,141,49,"sortedVelocities"],[1,1758,141,66,"midIndex"],[1,1762,141,79],[1,1763,142,4],[1,1764,148,4,"getProjectedScrollOffset"],[1,1789,148,29,"offset"],[1,1791,148,37,"timeMs"],[1,1794,152,8],[1,1801,152,15,"offset"],[1,1803,149,31,"this"],[1,1808,149,36,"getMedianVelocity"],[1,1828,152,41,"timeMs"],[1,1829,153,4],[1,1830,160,4,"computeVisibleIndices"],[1,1852,160,26,"layoutManager"],[1,1855,161,8],[1,1861,161,14,"windowSize"],[1,1863,161,27,"layoutManager"],[1,1865,161,41,"getWindowsSize"],[1,1882,162,14,"isHorizontal"],[1,1884,162,29,"layoutManager"],[1,1886,162,43,"isHorizontal"],[1,1901,164,14,"viewportStart"],[1,1903,164,30,"this"],[1,1908,164,35,"scrollOffset"],[1,1921,166,14,"viewportEnd"],[1,1923,166,28,"viewportStart"],[1,1926,165,29,"isHorizontal"],[1,1928,165,44,"windowSize"],[1,1930,165,55,"width"],[1,1936,165,63,"windowSize"],[1,1938,165,74,"height"],[1,1946,169,8],[1,1953,168,34,"layoutManager"],[1,1955,168,48,"getVisibleLayouts"],[1,1973,168,66,"viewportStart"],[1,1975,168,81,"viewportEnd"],[1,1977,170,4],[1,1978,176,4,"getEngagedIndices"],[1,1998,177,8],[1,2005,177,15,"this"],[1,2010,177,20,"engagedIndices"],[1,2024,178,4],[1,2025,179,4,"setScrollDirection"],[1,2044,179,23,"scrollDirection"],[1,2047,180,32],[1,2059,180,12,"scrollDirection"],[1,2062,181,12,"this"],[1,2067,181,17,"velocityHistory"],[1,2083,181,35],[1,2084,181,36],[1,2086,181,39],[1,2088,181,42],[1,2090,181,45],[1,2093,181,50],[1,2097,182,12,"this"],[1,2102,182,17,"velocityIndex"],[1,2116,182,33],[1,2120,185,12,"this"],[1,2125,185,17,"velocityHistory"],[1,2141,185,35],[1,2142,185,36],[1,2144,185,39],[1,2146,185,42],[1,2149,185,46],[1,2153,185,52],[1,2157,186,12,"this"],[1,2162,186,17,"velocityIndex"],[1,2176,186,33],[1,2178,188,4],[1,2179,193,4,"resetVelocityHistory"],[1,2202,194,12,"this"],[1,2207,194,17,"isScrollingBackward"],[1,2229,195,12,"this"],[1,2234,195,17,"setScrollDirection"],[1,2253,195,36],[1,2265,198,12,"this"],[1,2270,198,17,"setScrollDirection"],[1,2289,198,36],[1,2299,200,4],[1,2301,201,1],[1,2304]],"functionMap":{"names":["<global>","RVEngagedIndicesTrackerImpl","RVEngagedIndicesTrackerImpl#constructor","RVEngagedIndicesTrackerImpl#updateScrollOffset","RVEngagedIndicesTrackerImpl#updateVelocityHistory","RVEngagedIndicesTrackerImpl#isScrollingBackward","RVEngagedIndicesTrackerImpl#getMedianVelocity","sort$argument_0","RVEngagedIndicesTrackerImpl#getProjectedScrollOffset","RVEngagedIndicesTrackerImpl#computeVisibleIndices","RVEngagedIndicesTrackerImpl#getEngagedIndices","RVEngagedIndicesTrackerImpl#setScrollDirection","RVEngagedIndicesTrackerImpl#resetVelocityHistory"],"mappings":"AAA;OCE;ICC;KDmB;IES;KFiE;IGK;KHG;IIM;KJc;IKM;gECE,mCD;KLS;IOM;KPK;IQO;KRU;ISM;KTE;IUC;KVS;IWK;KXO;CDC"},"hasCjsExports":false},"type":"js/module"}]}