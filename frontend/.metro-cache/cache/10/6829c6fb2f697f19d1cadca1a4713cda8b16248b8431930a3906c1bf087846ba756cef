{"dependencies":[{"name":"../../errors/ErrorMessages","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":59,"index":59}}],"key":"dcb4K7pqb6gN/GPdKjYu35YRe0w=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,\"default\",{enumerable:!0,get:function(){return s}});var t=r(d[0],\"../../errors/ErrorMessages\");var s=class{constructor(t,s){this.possiblyViewableIndices=[],this.hasInteracted=!1,this.viewableIndices=[],this.lastReportedViewableIndices=[],this.timers=new Set,this.viewabilityConfig=t,this.viewableIndicesChanged=s}dispose(){this.timers.forEach(clearTimeout)}updateViewableItems(s,l,n,o,h){var c,v,w,b,u,f,I,V;if(void 0!==h&&(this.possiblyViewableIndices=h),null!==(null===(c=this.viewabilityConfig)||void 0===c?void 0:c.itemVisiblePercentThreshold)&&void 0!==(null===(v=this.viewabilityConfig)||void 0===v?void 0:v.itemVisiblePercentThreshold)&&null!==(null===(w=this.viewabilityConfig)||void 0===w?void 0:w.viewAreaCoveragePercentThreshold)&&void 0!==(null===(b=this.viewabilityConfig)||void 0===b?void 0:b.viewAreaCoveragePercentThreshold))throw new Error(t.ErrorMessages.multipleViewabilityThresholdTypesNotSupported);if(null!==(f=null===(u=this.viewabilityConfig)||void 0===u?void 0:u.waitForInteraction)&&void 0!==f&&f&&!this.hasInteracted)return;const p=this.possiblyViewableIndices.filter(t=>{var h,c;return this.isItemViewable(t,s,l,n,null===(h=this.viewabilityConfig)||void 0===h?void 0:h.viewAreaCoveragePercentThreshold,null===(c=this.viewabilityConfig)||void 0===c?void 0:c.itemVisiblePercentThreshold,o)});this.viewableIndices=p;const y=null!==(V=null===(I=this.viewabilityConfig)||void 0===I?void 0:I.minimumViewTime)&&void 0!==V?V:250;if(y>0){const t=setTimeout(()=>{this.timers.delete(t),this.checkViewableIndicesChanges(p)},y);this.timers.add(t)}else this.checkViewableIndicesChanges(p)}checkViewableIndicesChanges(t){const s=t.filter(t=>this.viewableIndices.includes(t)),l=s.filter(t=>!this.lastReportedViewableIndices.includes(t)),n=this.lastReportedViewableIndices.filter(t=>!s.includes(t));(l.length>0||n.length>0)&&(this.lastReportedViewableIndices=s,this.viewableIndicesChanged(s,l,n))}clearLastReportedViewableIndices(){this.lastReportedViewableIndices=[]}isItemViewable(t,s,l,n,o,h,c){const v=c(t);if(void 0===v)return!1;const w=(s?v.x:v.y)-l,b=s?v.width:v.height,u=s?n.width:n.height,f=Math.min(w+b,u)-Math.max(w,0);if(f===b)return!0;if(0===f)return!1;const I=null!=o;return(I?f/u:f/b)>=(I?.01*o:.01*(null!=h?h:0))}}});","lineCount":1,"map":[[1,90,97,0,"Object"],[1,97,97,0,"defineProperty"],[1,112,97,0,"e"],[1,114,97,0],[1,125,97,0,"enumerable"],[1,137,97,0],[1,139,97,0,"get"],[1,143,97,0],[1,161,97,0,"_default"],[1,162,97,0],[1,166,1,0],[1,170,1,0,"_errorsErrorMessages"],[1,172,1,0,"r"],[1,174,1,0,"d"],[1,176,1,0],[1,209,97,0],[1,213,97,0,"_default"],[1,215,6,0],[1,221,7,4,"constructor"],[1,233,7,16,"viewabilityConfig"],[1,235,7,35,"viewableIndicesChanged"],[1,238,11,8,"this"],[1,243,11,13,"possiblyViewableIndices"],[1,267,11,39],[1,270,12,8,"this"],[1,275,12,13,"hasInteracted"],[1,290,12,29],[1,292,13,8,"this"],[1,297,13,13,"viewableIndices"],[1,313,13,31],[1,316,14,8,"this"],[1,321,14,13,"lastReportedViewableIndices"],[1,349,14,43],[1,352,15,8,"this"],[1,357,15,13,"timers"],[1,364,15,22],[1,368,15,26,"Set"],[1,372,16,8,"this"],[1,377,16,13,"viewabilityConfig"],[1,395,16,33,"viewabilityConfig"],[1,397,17,8,"this"],[1,402,17,13,"viewableIndicesChanged"],[1,425,17,38,"viewableIndicesChanged"],[1,426,18,4],[1,427,19,4,"dispose"],[1,437,21,8,"this"],[1,442,21,13,"timers"],[1,449,21,20,"forEach"],[1,457,21,28,"clearTimeout"],[1,470,22,4],[1,471,23,4,"updateViewableItems"],[1,491,23,24,"horizontal"],[1,493,23,36,"scrollOffset"],[1,495,23,50,"listSize"],[1,497,23,60,"getLayout"],[1,499,23,71,"viewableIndices"],[1,502,24,8],[1,506,24,12,"_a"],[1,508,24,16,"_b"],[1,510,24,20,"_c"],[1,512,24,24,"_d"],[1,514,24,28,"_e"],[1,516,24,32,"_f"],[1,518,24,36,"_g"],[1,520,24,40,"_h"],[1,522,28,8],[1,530,25,32,"undefined"],[1,534,25,12,"viewableIndices"],[1,538,26,12,"this"],[1,543,26,17,"possiblyViewableIndices"],[1,567,26,43,"viewableIndices"],[1,570,28,116],[1,578,28,47],[1,586,28,14,"_a"],[1,588,28,19,"this"],[1,593,28,24,"viewabilityConfig"],[1,618,28,62],[1,622,28,55,"_a"],[1,629,28,71],[1,631,28,80,"_a"],[1,633,28,83,"itemVisiblePercentThreshold"],[1,668,29,116,"undefined"],[1,673,29,47],[1,681,29,14,"_b"],[1,683,29,19,"this"],[1,688,29,24,"viewabilityConfig"],[1,713,29,62],[1,717,29,55,"_b"],[1,724,29,71],[1,726,29,80,"_b"],[1,728,29,83,"itemVisiblePercentThreshold"],[1,758,30,121],[1,766,30,47],[1,774,30,14,"_c"],[1,776,30,19,"this"],[1,781,30,24,"viewabilityConfig"],[1,806,30,62],[1,810,30,55,"_c"],[1,817,30,71],[1,819,30,80,"_c"],[1,821,30,83,"viewAreaCoveragePercentThreshold"],[1,861,31,121,"undefined"],[1,866,31,47],[1,874,31,14,"_d"],[1,876,31,19,"this"],[1,881,31,24,"viewabilityConfig"],[1,906,31,62],[1,910,31,55,"_d"],[1,917,31,71],[1,919,31,80,"_d"],[1,921,31,83,"viewAreaCoveragePercentThreshold"],[1,955,32,12],[1,961,32,18],[1,965,32,22,"Error"],[1,971,32,28,"ErrorMessages"],[1,973,32,41,"ErrorMessages"],[1,987,32,42,"multipleViewabilityThresholdTypesNotSupported"],[1,1034,34,8],[1,1037,34,113],[1,1045,34,14,"_f"],[1,1047,34,53],[1,1055,34,20,"_e"],[1,1057,34,25,"this"],[1,1062,34,30,"viewabilityConfig"],[1,1087,34,68],[1,1091,34,61,"_e"],[1,1098,34,77],[1,1100,34,86,"_e"],[1,1102,34,89,"waitForInteraction"],[1,1128,34,128],[1,1132,34,121,"_f"],[1,1135,34,137,"_f"],[1,1139,35,13,"this"],[1,1144,35,18,"hasInteracted"],[1,1158,36,12],[1,1165,38,8],[1,1171,38,14,"newViewableIndices"],[1,1173,38,35,"this"],[1,1178,38,40,"possiblyViewableIndices"],[1,1202,38,64,"filter"],[1,1209,38,72,"index"],[1,1213,39,12],[1,1217,39,16,"_a"],[1,1219,39,20,"_b"],[1,1221,40,12],[1,1228,40,19,"this"],[1,1233,40,24,"isItemViewable"],[1,1248,40,39,"index"],[1,1250,40,46,"horizontal"],[1,1252,40,58,"scrollOffset"],[1,1254,40,72,"listSize"],[1,1256,40,116],[1,1264,40,83,"_a"],[1,1266,40,88,"this"],[1,1271,40,93,"viewabilityConfig"],[1,1296,40,131],[1,1300,40,124,"_a"],[1,1307,40,140],[1,1309,40,149,"_a"],[1,1311,40,152,"viewAreaCoveragePercentThreshold"],[1,1344,40,220],[1,1352,40,187,"_b"],[1,1354,40,192,"this"],[1,1359,40,197,"viewabilityConfig"],[1,1384,40,235],[1,1388,40,228,"_b"],[1,1395,40,244],[1,1397,40,253,"_b"],[1,1399,40,256,"itemVisiblePercentThreshold"],[1,1427,40,285,"getLayout"],[1,1432,42,8,"this"],[1,1437,42,13,"viewableIndices"],[1,1453,42,31,"newViewableIndices"],[1,1455,43,8],[1,1461,43,14,"minimumViewTime"],[1,1463,43,129],[1,1471,43,33,"_h"],[1,1473,43,72],[1,1481,43,39,"_g"],[1,1483,43,44,"this"],[1,1488,43,49,"viewabilityConfig"],[1,1513,43,87],[1,1517,43,80,"_g"],[1,1524,43,96],[1,1526,43,105,"_g"],[1,1528,43,108,"minimumViewTime"],[1,1551,43,144],[1,1555,43,137,"_h"],[1,1557,43,153,"_h"],[1,1559,43,158],[1,1563,45,8],[1,1566,45,12,"minimumViewTime"],[1,1568,45,30],[1,1570,45,33],[1,1571,46,12],[1,1577,46,18,"timeoutId"],[1,1579,46,30,"setTimeout"],[1,1590,46,41],[1,1595,47,16,"this"],[1,1600,47,21,"timers"],[1,1607,47,28,"delete"],[1,1614,47,35,"timeoutId"],[1,1617,48,16,"this"],[1,1622,48,21,"checkViewableIndicesChanges"],[1,1650,48,49,"newViewableIndices"],[1,1654,49,15,"minimumViewTime"],[1,1657,50,12,"this"],[1,1662,50,17,"timers"],[1,1669,50,24,"add"],[1,1673,50,28,"timeoutId"],[1,1675,51,8],[1,1681,53,12,"this"],[1,1686,53,17,"checkViewableIndicesChanges"],[1,1714,53,45,"newViewableIndices"],[1,1716,55,4],[1,1717,56,4,"checkViewableIndicesChanges"],[1,1745,56,32,"newViewableIndices"],[1,1748,58,8],[1,1754,58,14,"currentlyNewViewableIndices"],[1,1756,58,44,"newViewableIndices"],[1,1758,58,63,"filter"],[1,1765,58,71,"index"],[1,1768,58,81,"this"],[1,1773,58,86,"viewableIndices"],[1,1789,58,102,"includes"],[1,1798,58,111,"index"],[1,1802,59,14,"newlyVisibleItems"],[1,1804,59,34,"currentlyNewViewableIndices"],[1,1806,59,62,"filter"],[1,1813,59,70,"index"],[1,1817,59,81,"this"],[1,1822,59,86,"lastReportedViewableIndices"],[1,1850,59,114,"includes"],[1,1859,59,123,"index"],[1,1863,60,14,"newlyNonvisibleItems"],[1,1865,60,37,"this"],[1,1870,60,42,"lastReportedViewableIndices"],[1,1898,60,70,"filter"],[1,1905,60,78,"index"],[1,1909,60,89,"currentlyNewViewableIndices"],[1,1911,60,117,"includes"],[1,1920,60,126,"index"],[1,1925,61,12,"newlyVisibleItems"],[1,1927,61,30,"length"],[1,1934,61,39],[1,1937,61,44,"newlyNonvisibleItems"],[1,1939,61,65,"length"],[1,1946,61,74],[1,1951,62,12,"this"],[1,1956,62,17,"lastReportedViewableIndices"],[1,1984,62,47,"currentlyNewViewableIndices"],[1,1986,63,12,"this"],[1,1991,63,17,"viewableIndicesChanged"],[1,2014,63,40,"currentlyNewViewableIndices"],[1,2016,63,69,"newlyVisibleItems"],[1,2018,63,88,"newlyNonvisibleItems"],[1,2021,65,4],[1,2022,66,4,"clearLastReportedViewableIndices"],[1,2057,67,8,"this"],[1,2062,67,13,"lastReportedViewableIndices"],[1,2090,67,43],[1,2092,68,4],[1,2093,69,4,"isItemViewable"],[1,2108,69,19,"index"],[1,2110,69,26,"horizontal"],[1,2112,69,38,"scrollOffset"],[1,2114,69,52,"listSize"],[1,2116,69,62,"viewAreaCoveragePercentThreshold"],[1,2118,69,96,"itemVisiblePercentThreshold"],[1,2120,69,125,"getLayout"],[1,2123,70,8],[1,2129,70,14,"itemLayout"],[1,2131,70,27,"getLayout"],[1,2133,70,37,"index"],[1,2136,71,8],[1,2144,71,27,"undefined"],[1,2148,71,12,"itemLayout"],[1,2150,72,12],[1,2157,72,19],[1,2159,74,8],[1,2165,74,14,"itemTop"],[1,2168,74,25,"horizontal"],[1,2170,74,38,"itemLayout"],[1,2172,74,49,"x"],[1,2174,74,53,"itemLayout"],[1,2176,74,64,"y"],[1,2179,74,69,"scrollOffset"],[1,2181,75,14,"itemSize"],[1,2183,75,25,"horizontal"],[1,2185,75,38,"itemLayout"],[1,2187,75,49,"width"],[1,2193,75,57,"itemLayout"],[1,2195,75,68,"height"],[1,2202,76,14,"listMainSize"],[1,2204,76,29,"horizontal"],[1,2206,76,42,"listSize"],[1,2208,76,51,"width"],[1,2214,76,59,"listSize"],[1,2216,76,68,"height"],[1,2223,77,14,"pixelsVisible"],[1,2225,77,30,"Math"],[1,2230,77,35,"min"],[1,2234,77,39,"itemTop"],[1,2236,77,49,"itemSize"],[1,2238,77,59,"listMainSize"],[1,2241,77,75,"Math"],[1,2246,77,80,"max"],[1,2250,77,84,"itemTop"],[1,2252,77,93],[1,2255,79,8],[1,2258,79,12,"pixelsVisible"],[1,2262,79,30,"itemSize"],[1,2264,80,12],[1,2271,80,19],[1,2273,83,8],[1,2276,83,30],[1,2280,83,12,"pixelsVisible"],[1,2282,84,12],[1,2289,84,19],[1,2291,86,8],[1,2297,86,14,"viewAreaMode"],[1,2299,86,29,"viewAreaCoveragePercentThreshold"],[1,2307,94,8],[1,2314,88,24,"viewAreaMode"],[1,2316,89,14,"pixelsVisible"],[1,2318,89,30,"listMainSize"],[1,2320,90,14,"pixelsVisible"],[1,2322,90,30,"itemSize"],[1,2327,91,45,"viewAreaMode"],[1,2329,92,49],[1,2333,92,14,"viewAreaCoveragePercentThreshold"],[1,2335,93,131],[1,2340,93,15,"itemVisiblePercentThreshold"],[1,2348,93,96,"itemVisiblePercentThreshold"],[1,2350,93,126],[1,2353,95,4],[1,2355,97,33],[1,2358]],"functionMap":{"names":["<global>","ViewabilityHelper","constructor","dispose","updateViewableItems","possiblyViewableIndices.filter$argument_0","setTimeout$argument_0","checkViewableIndicesChanges","newViewableIndices.filter$argument_0","currentlyNewViewableIndices.filter$argument_0","lastReportedViewableIndices.filter$argument_0","clearLastReportedViewableIndices","isItemViewable"],"mappings":"AAA;ACK;ICC;KDW;IEC;KFG;IGC;uECe;SDG;yCEK;aFG;KHM;IMC;sECE,+CD;qEEC,4DF;6EGC,uDH;KNK;IUC;KVE;IWC;KX0B;CDC"},"hasCjsExports":false},"type":"js/module"}]}